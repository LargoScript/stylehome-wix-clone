{"version":3,"file":"entry-BVOnqvQ4.js","sources":["../../src/utils/dom.ts","../../src/modules/header.ts","../../src/utils/scroll.ts","../../src/modules/navigation.ts","../../src/modules/animations.ts","../../src/components/Carousel.ts","../../src/modules/carousel.ts","../../src/modules/faq.ts","../../src/modules/form.ts","../../src/modules/background-effects.ts","../../src/components/Footer.ts","../../src/modules/footer.ts","../../src/components/Lightbox.ts","../../src/modules/phone-dropdown.ts","../../src/entry.tsx"],"sourcesContent":["// DOM utilities\n\n/**\n * Safe querySelector with types\n */\nexport function querySelector<T extends HTMLElement>(\n  selector: string,\n  parent: Document | HTMLElement = document\n): T | null {\n  return parent.querySelector<T>(selector);\n}\n\n/**\n * Safe querySelectorAll with types\n */\nexport function querySelectorAll<T extends HTMLElement>(\n  selector: string,\n  parent: Document | HTMLElement = document\n): NodeListOf<T> {\n  return parent.querySelectorAll<T>(selector);\n}\n\n/**\n * Check if element exists\n */\nexport function elementExists<T extends HTMLElement>(\n  element: T | null\n): element is T {\n  return element !== null;\n}\n\n/**\n * Get numeric value from dataset\n */\nexport function getDatasetNumber(\n  element: HTMLElement,\n  key: string,\n  defaultValue: number = 0\n): number {\n  const value = element.dataset[key];\n  if (!value) return defaultValue;\n  const parsed = parseInt(value, 10);\n  return isNaN(parsed) ? defaultValue : parsed;\n}\n","// Header module - scroll effect and services overlay\n\nimport { querySelector } from '../utils/dom';\nimport type { ServicesSection } from '../types/dom';\n\n/**\n * Initialize effect scroll for header\n */\nexport function initHeaderScroll(): void {\n  const header = querySelector<HTMLElement>('.header');\n  if (!header) return;\n\n  const handleScroll = (): void => {\n    if (window.scrollY > 50) {\n      header.classList.add('scrolled');\n    } else {\n      header.classList.remove('scrolled');\n    }\n  };\n\n  window.addEventListener('scroll', handleScroll);\n  handleScroll(); // Check initial state\n}\n\n/**\n * Initialize services section overlay on scroll\n */\nexport function initServicesDarkening(): void {\n  const servicesSection = querySelector<ServicesSection>('.services');\n  if (!servicesSection) return;\n\n  let ticking = false;\n\n  const handleScroll = (): void => {\n    if (!ticking) {\n      window.requestAnimationFrame(() => {\n        const rect = servicesSection.getBoundingClientRect();\n        const windowHeight = window.innerHeight;\n        const sectionTop = rect.top;\n        const sectionHeight = rect.height;\n        \n        // Calculate overlay progress\n        let scrollProgress = 0;\n        \n        if (sectionTop < windowHeight && sectionTop > -sectionHeight) {\n          // Section visible on screen\n          scrollProgress = Math.max(0, Math.min(1, (windowHeight - sectionTop) / (windowHeight + sectionHeight * 0.5)));\n        } else if (sectionTop <= -sectionHeight * 0.5) {\n          // Section completely scrolled up\n          scrollProgress = 1;\n        }\n        \n        // Dynamically change overlay opacity (from 0 to 0.4)\n        const opacity = scrollProgress * 0.4;\n        servicesSection.style.setProperty('--darken-opacity', opacity.toString());\n        \n        // Add class for smooth transition\n        if (opacity > 0.1) {\n          servicesSection.classList.add('scrolled');\n        } else {\n          servicesSection.classList.remove('scrolled');\n        }\n        \n        ticking = false;\n      });\n      \n      ticking = true;\n    }\n  };\n\n  window.addEventListener('scroll', handleScroll, { passive: true });\n  handleScroll(); // Check initial state\n}\n","// Scroll utilities\n\n/**\n * Smooth scroll to element\n */\nexport function scrollToElement(\n  element: HTMLElement,\n  offset: number = 0,\n  behavior: ScrollBehavior = 'smooth'\n): void {\n  const elementPosition = element.getBoundingClientRect().top + window.pageYOffset;\n  const offsetPosition = elementPosition - offset;\n\n  window.scrollTo({\n    top: offsetPosition,\n    behavior\n  });\n}\n\n/**\n * Smooth scroll to page top\n */\nexport function scrollToTop(behavior: ScrollBehavior = 'smooth'): void {\n  window.scrollTo({\n    top: 0,\n    behavior\n  });\n}\n\n/**\n * Get current scroll position\n */\nexport function getScrollPosition(): number {\n  return window.pageYOffset || document.documentElement.scrollTop;\n}\n\n/**\n * Debounce for scroll events\n */\nexport function debounce<T extends (...args: any[]) => void>(\n  func: T,\n  wait: number\n): (...args: Parameters<T>) => void {\n  let timeout: ReturnType<typeof setTimeout> | null = null;\n  \n  return function executedFunction(...args: Parameters<T>) {\n    const later = () => {\n      timeout = null;\n      func(...args);\n    };\n    \n    if (timeout) {\n      clearTimeout(timeout);\n    }\n    timeout = setTimeout(later, wait);\n  };\n}\n","// Navigation module - smooth scroll, active nav link, auto burger menu\n\nimport { querySelector, querySelectorAll } from '../utils/dom';\nimport { scrollToElement, scrollToTop } from '../utils/scroll';\nimport type { CloseMenuFunction, CheckCollisionFunction } from '../types/navigation';\n\n// Global variables for interaction between modules\nexport let closeMenuFunction: CloseMenuFunction | null = null;\nexport let checkElementsCollision: CheckCollisionFunction | null = null;\n\n/**\n * Initialize automatic show/hide burger menu\n */\nexport function initAutoBurgerMenu(): void {\n  const nav = querySelector<HTMLElement>('.header__nav');\n  const actions = querySelector<HTMLElement>('.header__actions');\n  const burger = querySelector<HTMLElement>('.header__burger');\n  const header = querySelector<HTMLElement>('.header');\n  \n  if (!nav || !actions || !burger || !header) return;\n\n  checkElementsCollision = function(): void {\n    // Not check, if menu open\n    const isMenuOpen = nav.classList.contains('active');\n    if (isMenuOpen) {\n      return;\n    }\n\n    // Check only on desktop (width > 768px)\n    if (window.innerWidth <= 768) {\n      (burger as HTMLElement).style.display = 'flex';\n      if (!isMenuOpen) {\n        nav.style.display = 'none';\n      }\n      return;\n    }\n\n    const navRect = nav.getBoundingClientRect();\n    const actionsRect = actions.getBoundingClientRect();\n    \n    const gap = actionsRect.left - navRect.right;\n    const isTouching = gap <= 0;\n    \n    requestAnimationFrame(() => {\n      if (nav.classList.contains('active')) {\n        return;\n      }\n      \n      if (isTouching) {\n        nav.style.display = 'none';\n        burger.style.display = 'flex';\n        header.classList.add('burger-mode');\n      } else {\n        burger.style.display = 'none';\n        nav.style.display = 'flex';\n        header.classList.remove('burger-mode');\n      }\n    });\n  };\n\n  // Check on load\n  checkElementsCollision();\n\n  // Check on resize\n  let resizeRequestId: number | null = null;\n  window.addEventListener('resize', () => {\n    if (resizeRequestId) {\n      cancelAnimationFrame(resizeRequestId);\n    }\n    resizeRequestId = requestAnimationFrame(() => {\n      if (checkElementsCollision) {\n        checkElementsCollision();\n      }\n    });\n  });\n\n  // Check on scroll\n  let scrollRequestId: number | null = null;\n  window.addEventListener('scroll', () => {\n    if (nav.classList.contains('active')) {\n      return;\n    }\n    \n    if (scrollRequestId) {\n      cancelAnimationFrame(scrollRequestId);\n    }\n    scrollRequestId = requestAnimationFrame(() => {\n      if (checkElementsCollision) {\n        checkElementsCollision();\n      }\n    });\n  });\n}\n\n/**\n * Initialize smooth scroll navigation\n */\nexport function initSmoothScroll(): void {\n  const navLinks = querySelectorAll<HTMLAnchorElement>('.header__nav-link[href^=\"#\"]');\n  const header = querySelector<HTMLElement>('.header');\n  const nav = querySelector<HTMLElement>('.header__nav');\n  \n  navLinks.forEach(link => {\n    link.addEventListener('click', (e: MouseEvent) => {\n      const href = link.getAttribute('href');\n      if (!href) return;\n      \n      // Skip empty anchors\n      if (href === '#' || href === '#hero') {\n        e.preventDefault();\n        \n        if (nav && nav.classList.contains('active') && closeMenuFunction) {\n          closeMenuFunction();\n        }\n        \n        setTimeout(() => {\n          scrollToTop();\n        }, nav && nav.classList.contains('active') ? 150 : 0);\n        return;\n      }\n      \n      const targetId = href.substring(1);\n      const targetElement = document.getElementById(targetId);\n      \n      if (targetElement) {\n        e.preventDefault();\n        \n        if (nav && nav.classList.contains('active') && closeMenuFunction) {\n          closeMenuFunction();\n        }\n        \n        setTimeout(() => {\n          const headerHeight = header ? header.offsetHeight : 80;\n          scrollToElement(targetElement as HTMLElement, headerHeight);\n        }, nav && nav.classList.contains('active') ? 150 : 0);\n      }\n    });\n  });\n}\n\n/**\n * Initialize active link update on scroll\n */\nexport function initActiveNavLink(): void {\n  const sections = querySelectorAll<HTMLElement>('section[id]');\n  const navLinks = querySelectorAll<HTMLAnchorElement>('.header__nav-link[href^=\"#\"]');\n  const header = querySelector<HTMLElement>('.header');\n  const headerHeight = header ? header.offsetHeight : 80;\n  \n  const updateActiveLink = (): void => {\n    let current = '';\n    const scrollY = window.pageYOffset;\n    const windowHeight = window.innerHeight;\n    \n    // If we are at the top of page, active is hero\n    if (scrollY < 100) {\n      current = 'hero';\n    } else {\n      // Check all sections to find current one\n      sections.forEach(section => {\n        const rect = section.getBoundingClientRect();\n        const sectionId = section.getAttribute('id');\n        \n        if (sectionId) {\n          // Section is considered active if its top is above screen middle\n          // or if it occupies most of the screen\n          const sectionTop = rect.top;\n          const sectionBottom = rect.bottom;\n          const viewportMiddle = windowHeight / 2;\n          \n          // If section top is above screen middle and section is visible\n          if (sectionTop <= viewportMiddle && sectionBottom > 0) {\n            current = sectionId;\n          }\n        }\n      });\n    }\n    \n    navLinks.forEach(link => {\n      link.classList.remove('active');\n      const href = link.getAttribute('href');\n      \n      // Check different href variants\n      if (href === `#${current}` || \n          (current === 'hero' && (href === '#' || href === '#hero'))) {\n        link.classList.add('active');\n      }\n    });\n  };\n  \n  window.addEventListener('scroll', updateActiveLink, { passive: true });\n  updateActiveLink();\n}\n\n/**\n * Initialize mobile menu (burger)\n */\nexport function initMobileMenu(): void {\n  const burger = querySelector<HTMLElement>('.header__burger');\n  const nav = querySelector<HTMLElement>('.header__nav');\n  const header = querySelector<HTMLElement>('.header');\n  \n  if (!burger || !nav || !header) return;\n\n  // Make sure menu always starts in closed state\n  burger.classList.remove('active');\n  nav.classList.remove('active');\n  if (burger instanceof HTMLButtonElement) {\n    burger.setAttribute('aria-expanded', 'false');\n  }\n  document.body.style.overflow = '';\n  \n  const closeMenuWithoutAnimation = (): void => {\n    document.body.classList.add('no-transition');\n    burger.classList.remove('active');\n    nav.classList.remove('active');\n    if (burger instanceof HTMLButtonElement) {\n      burger.setAttribute('aria-expanded', 'false');\n    }\n    document.body.style.overflow = '';\n    setTimeout(() => {\n      document.body.classList.remove('no-transition');\n    }, 50);\n  };\n  \n  burger.addEventListener('click', (e: MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    \n    const isActive = burger.classList.contains('active');\n    header.classList.remove('burger-mode');\n    \n    burger.classList.toggle('active');\n    nav.classList.toggle('active');\n    if (burger instanceof HTMLButtonElement) {\n      burger.setAttribute('aria-expanded', String(!isActive));\n    }\n    \n    if (!isActive) {\n      nav.style.display = '';\n      nav.style.visibility = '';\n      nav.style.opacity = '';\n      nav.style.transform = '';\n      \n      nav.style.display = 'flex';\n      nav.style.visibility = 'visible';\n      nav.style.opacity = '1';\n      nav.style.transform = 'translateX(0)';\n      \n      document.body.style.overflow = 'hidden';\n    } else {\n      nav.style.transform = 'translateX(-100%)';\n      nav.style.opacity = '0';\n      nav.style.visibility = 'hidden';\n      document.body.style.overflow = '';\n      \n      setTimeout(() => {\n        if (!nav.classList.contains('active')) {\n          nav.style.display = '';\n        }\n        if (checkElementsCollision) {\n          checkElementsCollision();\n        }\n      }, 300);\n    }\n  });\n  \n  const closeMenu = (): void => {\n    burger.classList.remove('active');\n    nav.classList.remove('active');\n    if (burger instanceof HTMLButtonElement) {\n      burger.setAttribute('aria-expanded', 'false');\n    }\n    \n    nav.style.transform = 'translateX(-100%)';\n    nav.style.opacity = '0';\n    nav.style.visibility = 'hidden';\n    document.body.style.overflow = '';\n    \n    setTimeout(() => {\n      if (!nav.classList.contains('active')) {\n        nav.style.display = '';\n      }\n      if (checkElementsCollision) {\n        checkElementsCollision();\n      }\n    }, 300);\n  };\n  \n  closeMenuFunction = closeMenu;\n  \n  // Close menu on cross click\n  const navClose = querySelector<HTMLElement>('.header__nav-close', nav);\n  if (navClose) {\n    navClose.addEventListener('click', (e: MouseEvent) => {\n      e.stopPropagation();\n      closeMenu();\n    });\n  }\n  \n  // Close menu on click outside menu\n  nav.addEventListener('click', (e: MouseEvent) => {\n    if (e.target === nav) {\n      closeMenu();\n    }\n  });\n  \n  // Use matchMedia to detect media query change\n  const mediaQuery = window.matchMedia('(max-width: 768px)');\n  \n  const handleMediaChange = (e: MediaQueryListEvent): void => {\n    if (!e.matches) {\n      if (nav.classList.contains('active')) {\n        closeMenuWithoutAnimation();\n      }\n    }\n  };\n  \n  mediaQuery.addEventListener('change', handleMediaChange);\n  \n  // Handle resize\n  let resizeTimer: ReturnType<typeof setTimeout> | null = null;\n  let isResizing = false;\n  \n  window.addEventListener('resize', () => {\n    if (!isResizing) {\n      document.body.classList.add('no-transition');\n      isResizing = true;\n    }\n    \n    if (window.innerWidth > 768) {\n      if (nav.classList.contains('active')) {\n        burger.classList.remove('active');\n        nav.classList.remove('active');\n        if (burger instanceof HTMLButtonElement) {\n          burger.setAttribute('aria-expanded', 'false');\n        }\n        document.body.style.overflow = '';\n      }\n    }\n    \n    if (resizeTimer) {\n      clearTimeout(resizeTimer);\n    }\n    resizeTimer = setTimeout(() => {\n      document.body.classList.remove('no-transition');\n      isResizing = false;\n    }, 100);\n  });\n  \n  // Check initial state\n  if (window.innerWidth > 768) {\n    closeMenuWithoutAnimation();\n  }\n}\n","// Animations module - AOS and Anime.js animation\n\nimport { querySelector, querySelectorAll } from '../utils/dom';\nimport type { AnimeConfig } from '../types/anime';\nimport type { AOSOptions } from '../types/aos';\n\n/**\n * Initialize all animations\n */\nexport function initAnimations(): void {\n  // Initialize AOS (Animate On Scroll)\n  if (typeof window.AOS !== 'undefined') {\n    const aosOptions: AOSOptions = {\n      duration: 800,\n      easing: 'ease-out-cubic',\n      once: true,\n      offset: 100,\n      delay: 0,\n      anchorPlacement: 'top-bottom',\n      disable: 'mobile'\n    };\n    window.AOS.init(aosOptions);\n  }\n\n  // Animation Header elements on load\n  const headerLogo = querySelector<HTMLElement>('.header__logo');\n  const headerNav = querySelector<HTMLElement>('.header__nav');\n  const headerActions = querySelector<HTMLElement>('.header__actions');\n\n  // CRITICAL: Always ensure elements are visible first\n  // This prevents elements from being hidden if animations fail\n  if (headerLogo) {\n    headerLogo.style.opacity = '1';\n    headerLogo.style.visibility = 'visible';\n  }\n  if (headerNav) {\n    headerNav.style.opacity = '1';\n    headerNav.style.visibility = 'visible';\n  }\n  if (headerActions) {\n    headerActions.style.opacity = '1';\n    headerActions.style.visibility = 'visible';\n  }\n\n  // Fallback: ensure elements are visible if anime.js is not loaded\n  if (typeof window.anime === 'undefined') {\n    // Already visible from above, just ensure transforms are reset\n    if (headerLogo) {\n      headerLogo.style.transform = 'none';\n    }\n    if (headerNav) {\n      headerNav.style.transform = 'none';\n    }\n    if (headerActions) {\n      headerActions.style.transform = 'none';\n    }\n    return; // Exit early if anime.js is not available\n  }\n\n  // Safety timeout: if animations don't complete in 2 seconds, make elements visible\n  let safetyTimeout: ReturnType<typeof setTimeout> | null = null;\n  \n  if (typeof window.anime !== 'undefined') {\n    safetyTimeout = setTimeout(() => {\n      if (headerLogo) {\n        headerLogo.style.opacity = '1';\n        headerLogo.style.visibility = 'visible';\n        headerLogo.style.transform = 'none';\n      }\n      if (headerNav) {\n        headerNav.style.opacity = '1';\n        headerNav.style.visibility = 'visible';\n        headerNav.style.transform = 'none';\n      }\n      if (headerActions) {\n        headerActions.style.opacity = '1';\n        headerActions.style.visibility = 'visible';\n        headerActions.style.transform = 'none';\n      }\n      console.warn('Animation safety timeout: forcing elements visible');\n    }, 2000);\n\n    // First hide elements (only if anime.js is confirmed available)\n    if (headerLogo) {\n      headerLogo.style.opacity = '0';\n      headerLogo.style.transform = 'translateX(-30px)';\n    }\n    if (headerNav) {\n      headerNav.style.opacity = '0';\n      headerNav.style.transform = 'translateY(-20px)';\n    }\n    if (headerActions) {\n      headerActions.style.opacity = '0';\n      headerActions.style.transform = 'translateX(30px)';\n    }\n\n    // Animation logo (from left)\n    if (headerLogo && safetyTimeout) {\n      const logoConfig: AnimeConfig = {\n        targets: headerLogo,\n        opacity: [0, 1],\n        translateX: [-30, 0],\n        duration: 800,\n        delay: 100,\n        easing: 'easeOutCubic',\n        complete: () => {\n          // Clear safety timeout on successful animation\n          if (safetyTimeout) {\n            clearTimeout(safetyTimeout);\n            safetyTimeout = null;\n          }\n          if (headerLogo) {\n            headerLogo.style.visibility = 'visible';\n          }\n        }\n      };\n      window.anime(logoConfig);\n    }\n\n    // Animation navigation (from top)\n    if (headerNav) {\n      const navConfig: AnimeConfig = {\n        targets: headerNav,\n        opacity: [0, 1],\n        translateY: [-20, 0],\n        duration: 800,\n        delay: 200,\n        easing: 'easeOutCubic'\n      };\n      window.anime(navConfig);\n\n      // Animation nav links one by one\n      const navLinks = querySelectorAll<HTMLElement>('.header__nav-link', headerNav);\n      navLinks.forEach((link, index) => {\n        link.style.opacity = '0';\n        const linkConfig: AnimeConfig = {\n          targets: link,\n          opacity: [0, 1],\n          translateY: [-10, 0],\n          duration: 400,\n          delay: 300 + (index * 50),\n          easing: 'easeOutCubic'\n        };\n        window.anime(linkConfig);\n      });\n    }\n\n    // Animation actions (from right)\n    if (headerActions) {\n      const actionsConfig: AnimeConfig = {\n        targets: headerActions,\n        opacity: [0, 1],\n        translateX: [30, 0],\n        duration: 800,\n        delay: 400,\n        easing: 'easeOutCubic',\n        complete: () => {\n          // Ensure visibility after animation\n          if (headerActions) {\n            headerActions.style.visibility = 'visible';\n          }\n        }\n      };\n      window.anime(actionsConfig);\n    }\n\n    // Animation Hero section\n    const badgeConfig: AnimeConfig = {\n      targets: '.hero__badge',\n      opacity: [0, 1],\n      translateY: [-30, 0],\n      duration: 1000,\n      delay: 600,\n      easing: 'easeOutCubic'\n    };\n    window.anime(badgeConfig);\n\n    const heroCardConfig: AnimeConfig = {\n      targets: '.hero__card',\n      opacity: [0, 1],\n      translateY: [50, 0],\n      duration: 1200,\n      delay: 900,\n      easing: 'easeOutCubic'\n    };\n    window.anime(heroCardConfig);\n\n    const heroTitleConfig: AnimeConfig = {\n      targets: '.hero__title',\n      opacity: [0, 1],\n      scale: [0.9, 1],\n      duration: 1000,\n      delay: 1100,\n      easing: 'easeOutElastic(1, .6)'\n    };\n    window.anime(heroTitleConfig);\n\n    // Animation project cards on hover\n    const projectCards = querySelectorAll<HTMLElement>('.project-card');\n    projectCards.forEach((card) => {\n      const carousel = querySelector<HTMLElement>('.project-card__carousel', card);\n      if (carousel) {\n        card.addEventListener('mouseenter', () => {\n          const hoverConfig: AnimeConfig = {\n            targets: carousel,\n            scale: 1.05,\n            duration: 400,\n            easing: 'easeOutQuad'\n          };\n          window.anime(hoverConfig);\n        });\n\n        card.addEventListener('mouseleave', () => {\n          const leaveConfig: AnimeConfig = {\n            targets: carousel,\n            scale: 1,\n            duration: 400,\n            easing: 'easeOutQuad'\n          };\n          window.anime(leaveConfig);\n        });\n      }\n    });\n\n    // Form button animation on hover\n    const formButtons = querySelectorAll<HTMLElement>('.form__submit');\n    formButtons.forEach((btn) => {\n      btn.addEventListener('mouseenter', () => {\n        const enterConfig: AnimeConfig = {\n          targets: btn,\n          scale: 1.05,\n          duration: 200,\n          easing: 'easeOutQuad'\n        };\n        window.anime(enterConfig);\n      });\n\n      btn.addEventListener('mouseleave', () => {\n        const leaveConfig: AnimeConfig = {\n          targets: btn,\n          scale: 1,\n          duration: 200,\n          easing: 'easeOutQuad'\n        };\n        window.anime(leaveConfig);\n      });\n    });\n\n    // Animation services-hero cards on hover\n    const servicesHeroCards = querySelectorAll<HTMLElement>('.services-hero__card');\n    servicesHeroCards.forEach((card) => {\n      card.addEventListener('mouseenter', () => {\n        const enterConfig: AnimeConfig = {\n          targets: card,\n          scale: 1.03,\n          duration: 300,\n          easing: 'easeOutQuad'\n        };\n        window.anime(enterConfig);\n      });\n\n      card.addEventListener('mouseleave', () => {\n        const leaveConfig: AnimeConfig = {\n          targets: card,\n          scale: 1,\n          duration: 300,\n          easing: 'easeOutQuad'\n        };\n        window.anime(leaveConfig);\n      });\n    });\n  }\n}\n","// Carousel component - reusable class for working with carousels\n\nimport { querySelector, querySelectorAll, getDatasetNumber } from '../utils/dom';\nimport type { CarouselTrack } from '../types/dom';\n\nexport interface CarouselOptions {\n  /** Whether to use infinite cycle */\n  infinite?: boolean;\n  /** Duration animation transition in ms */\n  transitionDuration?: number;\n  /** Threshold for swipe on mobile devices */\n  swipeThreshold?: number;\n  /** Selector for buttons \"Previous\" */\n  prevButtonSelector?: string;\n  /** Selector for buttons \"Next\" */\n  nextButtonSelector?: string;\n  /** Selector for track carousel */\n  trackSelector?: string;\n}\n\nexport class Carousel {\n  private carousel: HTMLElement;\n  private track: CarouselTrack;\n  private prevBtn: HTMLElement | null;\n  private nextBtn: HTMLElement | null;\n  private slides: HTMLImageElement[];\n  private originalCount: number;\n  private currentIndex: number;\n  private slideWidth: number;\n  private isTransitioning: boolean = false;\n  \n  private options: Required<CarouselOptions>;\n  \n  // Handlers events for removal\n  private clickHandler!: (e: MouseEvent) => void;\n  private resizeHandler!: () => void;\n  private touchStartHandler!: (e: TouchEvent) => void;\n  private touchMoveHandler!: (e: TouchEvent) => void;\n  private touchEndHandler!: () => void;\n  \n  private touchStartX: number = 0;\n  private touchEndX: number = 0;\n\n  constructor(\n    carouselElement: HTMLElement,\n    options: CarouselOptions = {}\n  ) {\n    this.carousel = carouselElement;\n    \n    // Set default options\n    this.options = {\n      infinite: options.infinite ?? true,\n      transitionDuration: options.transitionDuration ?? 500,\n      swipeThreshold: options.swipeThreshold ?? 50,\n      prevButtonSelector: options.prevButtonSelector ?? '.carousel-btn.prev',\n      nextButtonSelector: options.nextButtonSelector ?? '.carousel-btn.next',\n      trackSelector: options.trackSelector ?? '.carousel-track',\n    };\n\n    // Find elements\n    const track = querySelector<CarouselTrack>(this.options.trackSelector, this.carousel);\n    if (!track) {\n      throw new Error('Carousel track not found');\n    }\n    this.track = track;\n\n    this.prevBtn = querySelector<HTMLElement>(this.options.prevButtonSelector, this.carousel);\n    this.nextBtn = querySelector<HTMLElement>(this.options.nextButtonSelector, this.carousel);\n\n    // Get slides\n    this.slides = Array.from(this.track.querySelectorAll<HTMLImageElement>('img'));\n    if (this.slides.length === 0) {\n      throw new Error('No slides found in carousel');\n    }\n\n    // Initialize carousel\n    this.originalCount = this.slides.length;\n    this.currentIndex = 1;\n    this.slideWidth = this.carousel.clientWidth;\n\n    // Hide buttons, if there is only 1 slide\n    if (this.originalCount <= 1) {\n      if (this.prevBtn) {\n        this.prevBtn.style.display = 'none';\n      }\n      if (this.nextBtn) {\n        this.nextBtn.style.display = 'none';\n      }\n      // If only 1 slide, not add listeners events\n      return;\n    }\n\n    // Setup infinite cycle, if needed\n    if (this.options.infinite) {\n      this.setupInfiniteLoop();\n    }\n\n    // Set initial position\n    this.initializePosition();\n\n    // Bind event handlers\n    this.clickHandler = this.handleClick.bind(this);\n    this.resizeHandler = this.handleResize.bind(this);\n    this.touchStartHandler = this.handleTouchStart.bind(this);\n    this.touchMoveHandler = this.handleTouchMove.bind(this);\n    this.touchEndHandler = this.handleTouchEnd.bind(this);\n\n    // Add listeners events\n    this.attachEventListeners();\n  }\n\n  /**\n   * Settings for infinite cycle (adding duplicates)\n   */\n  private setupInfiniteLoop(): void {\n    const firstSlide = this.slides[0].cloneNode(true) as HTMLImageElement;\n    const lastSlide = this.slides[this.slides.length - 1].cloneNode(true) as HTMLImageElement;\n    \n    this.track.insertBefore(lastSlide, this.slides[0]);\n    this.track.appendChild(firstSlide);\n    \n    // Update slides list\n    this.slides = Array.from(this.track.querySelectorAll<HTMLImageElement>('img'));\n  }\n\n  /**\n   * Initialize initial position\n   */\n  private initializePosition(): void {\n    this.track.dataset.index = this.currentIndex.toString();\n    this.track.style.transition = 'none';\n    this.track.style.transform = `translateX(-${this.currentIndex * this.slideWidth}px)`;\n    \n    setTimeout(() => {\n      this.track.style.transition = `transform ${this.options.transitionDuration}ms ease`;\n    }, 50);\n  }\n\n  /**\n   * Handle button clicks\n   */\n  private handleClick(e: MouseEvent): void {\n    const target = e.target as HTMLElement;\n    const prevBtn = target.closest(this.options.prevButtonSelector);\n    const nextBtn = target.closest(this.options.nextButtonSelector);\n\n    if (!prevBtn && !nextBtn) return;\n    if (target.closest('.project-card__carousel') !== this.carousel) return;\n    if (this.isTransitioning) return;\n\n    if (prevBtn) {\n      this.goToPrevious();\n    } else if (nextBtn) {\n      this.goToNext();\n    }\n  }\n\n  /**\n   * Go to previous slide\n   */\n  public goToPrevious(): void {\n    if (this.isTransitioning) return;\n    \n    this.currentIndex = this.currentIndex - 1;\n    \n    if (this.options.infinite) {\n      if (this.currentIndex < 1) {\n        this.currentIndex = 0;\n      }\n    } else {\n      if (this.currentIndex < 0) {\n        this.currentIndex = this.originalCount - 1;\n      }\n    }\n\n    this.moveToIndex(this.currentIndex);\n  }\n\n  /**\n   * Go to next slide\n   */\n  public goToNext(): void {\n    if (this.isTransitioning) return;\n    \n    this.currentIndex = this.currentIndex + 1;\n    \n    if (this.options.infinite) {\n      const maxIndex = this.originalCount;\n      if (this.currentIndex > maxIndex) {\n        this.currentIndex = maxIndex + 1;\n      }\n    } else {\n      if (this.currentIndex >= this.originalCount) {\n        this.currentIndex = 0;\n      }\n    }\n\n    this.moveToIndex(this.currentIndex);\n  }\n\n  /**\n   * Go to specific index\n   */\n  public goToIndex(index: number): void {\n    if (this.isTransitioning) return;\n    \n    if (this.options.infinite) {\n      if (index < 0) index = 0;\n      if (index > this.originalCount + 1) index = this.originalCount + 1;\n    } else {\n      if (index < 0) index = 0;\n      if (index >= this.originalCount) index = this.originalCount - 1;\n    }\n\n    this.currentIndex = index;\n    this.moveToIndex(this.currentIndex);\n  }\n\n  /**\n   * Move to index with animation\n   */\n  private moveToIndex(index: number): void {\n    this.isTransitioning = true;\n    this.track.dataset.index = index.toString();\n    this.track.style.transition = `transform ${this.options.transitionDuration}ms ease`;\n    this.track.style.transform = `translateX(-${index * this.slideWidth}px)`;\n\n    if (this.options.infinite) {\n      this.track.addEventListener('transitionend', this.handleTransitionEnd.bind(this), { once: true });\n    } else {\n      setTimeout(() => {\n        this.isTransitioning = false;\n      }, this.options.transitionDuration);\n    }\n  }\n\n  /**\n   * Handle animation transition completion (for infinite cycle)\n   */\n  private handleTransitionEnd(event: TransitionEvent): void {\n    if (event.target !== this.track) return;\n    \n    const currentIndex = getDatasetNumber(this.track, 'index', 1);\n    \n    // If we are on duplicate of last (index 0), go to last original\n    if (currentIndex === 0) {\n      this.track.style.transition = 'none';\n      this.track.dataset.index = this.originalCount.toString();\n      this.track.style.transform = `translateX(-${this.originalCount * this.slideWidth}px)`;\n      this.currentIndex = this.originalCount;\n      setTimeout(() => {\n        this.track.style.transition = `transform ${this.options.transitionDuration}ms ease`;\n      }, 50);\n    }\n    // If we are on duplicate of first (index originalCount + 1), go to first original\n    else if (currentIndex === this.originalCount + 1) {\n      this.track.style.transition = 'none';\n      this.track.dataset.index = '1';\n      this.track.style.transform = `translateX(-${this.slideWidth}px)`;\n      this.currentIndex = 1;\n      setTimeout(() => {\n        this.track.style.transition = `transform ${this.options.transitionDuration}ms ease`;\n      }, 50);\n    }\n    \n    this.isTransitioning = false;\n  }\n\n  /**\n   * Handle window size change\n   */\n  private handleResize(): void {\n    this.slideWidth = this.carousel.clientWidth;\n    const index = getDatasetNumber(this.track, 'index', 1);\n    this.track.style.transform = `translateX(-${index * this.slideWidth}px)`;\n  }\n\n  /**\n   * Handle touch start (for swipe)\n   */\n  private handleTouchStart(e: TouchEvent): void {\n    this.touchStartX = e.touches[0].clientX;\n  }\n\n  /**\n   * Handle touch move\n   */\n  private handleTouchMove(e: TouchEvent): void {\n    this.touchEndX = e.touches[0].clientX;\n  }\n\n  /**\n   * Handle touch end (swipe)\n   */\n  private handleTouchEnd(): void {\n    if (this.isTransitioning) return;\n    \n    const threshold = this.options.swipeThreshold;\n    const diff = this.touchStartX - this.touchEndX;\n\n    if (Math.abs(diff) > threshold) {\n      if (diff > 0) {\n        // Swipe left - next slide\n        this.goToNext();\n      } else {\n        // Swipe right - previous slide\n        this.goToPrevious();\n      }\n    }\n\n    this.touchStartX = 0;\n    this.touchEndX = 0;\n  }\n\n  /**\n   * Add event listeners\n   */\n  private attachEventListeners(): void {\n    // Button clicks (event delegation)\n    document.addEventListener('click', this.clickHandler);\n\n    // Window size change\n    window.addEventListener('resize', this.resizeHandler);\n\n    // Touch events for swipe\n    this.carousel.addEventListener('touchstart', this.touchStartHandler);\n    this.carousel.addEventListener('touchmove', this.touchMoveHandler);\n    this.carousel.addEventListener('touchend', this.touchEndHandler);\n  }\n\n  /**\n   * Removal listeners events (for cleanup)\n   */\n  public destroy(): void {\n    document.removeEventListener('click', this.clickHandler);\n    window.removeEventListener('resize', this.resizeHandler);\n    this.carousel.removeEventListener('touchstart', this.touchStartHandler);\n    this.carousel.removeEventListener('touchmove', this.touchMoveHandler);\n    this.carousel.removeEventListener('touchend', this.touchEndHandler);\n  }\n\n  /**\n   * Update carousel (e.g., after adding new slides)\n   */\n  public update(): void {\n    this.slides = Array.from(this.track.querySelectorAll<HTMLImageElement>('img'));\n    this.originalCount = this.slides.length;\n    this.slideWidth = this.carousel.clientWidth;\n    \n    if (this.options.infinite) {\n      // Remove old duplicates, if they exist\n      const allSlides = this.track.querySelectorAll('img');\n      if (allSlides.length > this.originalCount) {\n        // Duplicate cleanup logic can be added if needed\n      }\n      this.setupInfiniteLoop();\n    }\n    \n    this.initializePosition();\n  }\n\n  /**\n   * Get current index\n   */\n  public getCurrentIndex(): number {\n    return this.currentIndex;\n  }\n\n  /**\n   * Get slides count\n   */\n  public getSlideCount(): number {\n    return this.originalCount;\n  }\n}\n","// Carousel module - projects carousel with infinite loop\n\nimport { querySelectorAll } from '../utils/dom';\nimport { Carousel, type CarouselOptions } from '../components/Carousel';\n\n// Store reference to all created carousels for cleanup capability\nconst carouselInstances: Carousel[] = [];\n\n/**\n * Initialize project carousels\n * \n * @param options Options for carousel settings (optional)\n */\nexport function initCarousels(options?: CarouselOptions): void {\n  const carouselElements = querySelectorAll<HTMLElement>('.project-card__carousel');\n  \n  carouselElements.forEach(carouselElement => {\n    try {\n      const carousel = new Carousel(carouselElement, options);\n      carouselInstances.push(carousel);\n    } catch (error) {\n      // If carousel cannot be initialized (slides, track don't exist, etc.),\n      // just skip it\n      console.warn('Failed to initialize carousel:', error);\n    }\n  });\n}\n\n/**\n * Cleanup all carousels (remove event listeners)\n * Useful for dynamic page updates\n */\nexport function destroyCarousels(): void {\n  carouselInstances.forEach(carousel => {\n    carousel.destroy();\n  });\n  carouselInstances.length = 0;\n}\n\n/**\n * Get all carousel instances\n * Useful for programmatic carousel control\n */\nexport function getCarouselInstances(): readonly Carousel[] {\n  return carouselInstances;\n}\n","// FAQ module - accordion\n\nimport { querySelector, querySelectorAll } from '../utils/dom';\n\n/**\n * Initialize FAQ accordion\n */\nexport function initFAQ(): void {\n  const faqItems = querySelectorAll<HTMLElement>('.faq__item');\n  \n  faqItems.forEach(item => {\n    const question = querySelector<HTMLElement>('.faq__question', item);\n    const answer = querySelector<HTMLElement>('.faq__answer', item);\n    \n    if (!question || !answer) return;\n    \n    // Protection from double binding\n    if (question.dataset.bound) return;\n    question.dataset.bound = 'true';\n    \n    question.addEventListener('click', () => {\n      const isActive = item.classList.contains('active');\n      \n      // Close all other elements\n      faqItems.forEach(i => {\n        if (i !== item) {\n          const a = querySelector<HTMLElement>('.faq__answer', i);\n          i.classList.remove('active');\n          if (a) {\n            a.style.maxHeight = '0';\n          }\n        }\n      });\n      \n      // Toggle current element\n      if (!isActive) {\n        item.classList.add('active');\n        answer.style.maxHeight = '0';\n        requestAnimationFrame(() => {\n          const height = answer.scrollHeight + 30;\n          answer.style.maxHeight = `${height}px`;\n        });\n      } else {\n        const currentHeight = answer.scrollHeight + 30;\n        answer.style.maxHeight = `${currentHeight}px`;\n        requestAnimationFrame(() => {\n          answer.style.maxHeight = '0';\n          item.classList.remove('active');\n        });\n      }\n    });\n  });\n  \n  // Update height on change size window\n  window.addEventListener('resize', () => {\n    faqItems.forEach(item => {\n      if (item.classList.contains('active')) {\n        const answer = querySelector<HTMLElement>('.faq__answer', item);\n        if (answer && answer.style.maxHeight && answer.style.maxHeight !== '0px') {\n          const height = answer.scrollHeight + 30;\n          answer.style.maxHeight = `${height}px`;\n        }\n      }\n    });\n  });\n}\n","// Form module - auto-resize textarea, form validation, and photo upload\n\nimport { querySelector, querySelectorAll } from '../utils/dom';\n\n// Store uploaded photos\nlet uploadedPhotos: File[] = [];\n\n/**\n * Initialize automatic textarea resize\n */\nfunction initTextareaResize(): void {\n  const textarea = querySelector<HTMLTextAreaElement>('.form__textarea');\n  if (!textarea) return;\n  \n  // Set initial height\n  textarea.style.height = 'auto';\n  textarea.style.height = `${textarea.scrollHeight}px`;\n  \n  // Automatically change height on text input\n  textarea.addEventListener('input', function() {\n    this.style.height = 'auto';\n    const newHeight = Math.min(this.scrollHeight, 400); // Maximum height 400px\n    this.style.height = `${newHeight}px`;\n  });\n  \n  // Also on page load\n  window.addEventListener('load', () => {\n    textarea.style.height = 'auto';\n    const newHeight = Math.min(textarea.scrollHeight, 400);\n    textarea.style.height = `${newHeight}px`;\n  });\n}\n\n/**\n * Validate form field\n */\nfunction validateField(field: HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement): boolean {\n  const isValid = field.checkValidity();\n  \n  if (!isValid) {\n    field.classList.add('error');\n  } else {\n    field.classList.remove('error');\n  }\n  \n  return isValid;\n}\n\n/**\n * Validate entire form\n */\nfunction validateForm(form: HTMLFormElement): boolean {\n  const requiredFields = form.querySelectorAll<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>(\n    'input[required], select[required], textarea[required]'\n  );\n  \n  let isFormValid = true;\n  \n  requiredFields.forEach(field => {\n    const isValid = validateField(field);\n    if (!isValid) {\n      isFormValid = false;\n    }\n  });\n  \n  return isFormValid;\n}\n\n/**\n * Add required class to labels and make asterisks red\n */\nfunction markRequiredLabels(): void {\n  const form = querySelector<HTMLFormElement>('.consultation__form');\n  if (!form) return;\n  \n  const requiredFields = form.querySelectorAll<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>(\n    'input[required], select[required], textarea[required]'\n  );\n  \n  requiredFields.forEach(field => {\n    const label = form.querySelector<HTMLLabelElement>(`label[for=\"${field.id}\"]`);\n    if (label) {\n      // Replace asterisk in label text with red styled span\n      const labelText = label.innerHTML;\n      // Check if asterisk exists and not already wrapped in span\n      if (labelText.includes('*') && !labelText.includes('<span')) {\n        label.innerHTML = labelText.replace(/\\s*\\*\\s*$/, ' <span style=\"color: #8b0000; font-weight: 700;\">*</span>');\n      }\n      label.classList.add('required');\n    }\n  });\n}\n\n/**\n * Initialize photo upload functionality\n */\nfunction initPhotoUpload(): void {\n  const fileInput = querySelector<HTMLInputElement>('#photos');\n  const previewContainer = querySelector<HTMLElement>('#photosPreview');\n  \n  if (!fileInput || !previewContainer) return;\n  \n  // Handle file selection\n  fileInput.addEventListener('change', (e) => {\n    const target = e.target as HTMLInputElement;\n    if (!target.files) return;\n    \n    const files = Array.from(target.files);\n    \n    // Validate file types and sizes\n    const maxSize = 10 * 1024 * 1024; // 10MB\n    const allowedTypes = ['image/jpeg', 'image/jpg', 'image/png', 'image/webp', 'image/gif'];\n    \n    files.forEach((file) => {\n      if (!allowedTypes.includes(file.type)) {\n        alert(`File ${file.name} is not supported. Please select an image (JPG, PNG, WEBP, GIF).`);\n        return;\n      }\n      \n      if (file.size > maxSize) {\n        alert(`File ${file.name} is too large. Maximum size: 10MB.`);\n        return;\n      }\n      \n      // Add to uploaded photos array\n      uploadedPhotos.push(file);\n      \n      // Create preview\n      const reader = new FileReader();\n      reader.onload = (e) => {\n        const photoItem = document.createElement('div');\n        photoItem.className = 'form__photo-item';\n        photoItem.dataset.fileName = file.name;\n        \n        const img = document.createElement('img');\n        img.src = e.target?.result as string;\n        img.alt = file.name;\n        \n        const removeBtn = document.createElement('button');\n        removeBtn.className = 'form__photo-remove';\n        removeBtn.type = 'button';\n        removeBtn.setAttribute('aria-label', 'Remove photo');\n        removeBtn.addEventListener('click', () => {\n          // Remove from array\n          uploadedPhotos = uploadedPhotos.filter(f => f !== file);\n          // Remove from DOM\n          photoItem.remove();\n          // Update file input\n          updateFileInput();\n        });\n        \n        photoItem.appendChild(img);\n        photoItem.appendChild(removeBtn);\n        previewContainer.appendChild(photoItem);\n      };\n      \n      reader.readAsDataURL(file);\n    });\n    \n    // Clear file input to allow selecting the same file again\n    fileInput.value = '';\n  });\n}\n\n/**\n * Update file input to reflect current uploaded photos\n */\nfunction updateFileInput(): void {\n  const fileInput = querySelector<HTMLInputElement>('#photos');\n  if (!fileInput) return;\n  \n  // Create a new DataTransfer object to simulate file selection\n  const dataTransfer = new DataTransfer();\n  uploadedPhotos.forEach(file => {\n    dataTransfer.items.add(file);\n  });\n  \n  fileInput.files = dataTransfer.files;\n}\n\n/**\n * Initialize form validation\n */\nfunction initFormValidation(): void {\n  const form = querySelector<HTMLFormElement>('.consultation__form');\n  if (!form) return;\n  \n  // Mark required labels\n  markRequiredLabels();\n  \n  // Remove error class on input/change\n  const fields = form.querySelectorAll<HTMLInputElement | HTMLSelectElement | HTMLTextAreaElement>(\n    'input, select, textarea'\n  );\n  \n  fields.forEach(field => {\n    field.addEventListener('input', () => {\n      if (field.hasAttribute('required')) {\n        validateField(field);\n      }\n    });\n    \n    field.addEventListener('change', () => {\n      if (field.hasAttribute('required')) {\n        validateField(field);\n      }\n    });\n  });\n  \n  // Validate on form submit\n  form.addEventListener('submit', async (e) => {\n    e.preventDefault();\n    \n    const isValid = validateForm(form);\n    \n    if (isValid) {\n      // Show loading state\n      const submitBtn = form.querySelector<HTMLButtonElement>('.form__submit');\n      const originalText = submitBtn?.textContent || 'Send';\n      if (submitBtn) {\n        submitBtn.disabled = true;\n        submitBtn.textContent = 'Sending...';\n      }\n      \n      try {\n        // Prepare form data\n        const formData = new FormData(form);\n        \n        // Add photos to form data\n        uploadedPhotos.forEach((file, index) => {\n          formData.append(`photo_${index}`, file);\n        });\n        formData.append('photoCount', uploadedPhotos.length.toString());\n        \n        // Send form data (you can use EmailJS, Formspree, or your backend)\n        await submitForm(formData);\n        \n        // Show success message\n        showFormMessage('Thank you! Your message has been sent. We will contact you soon.', 'success');\n        \n        // Reset form\n        form.reset();\n        uploadedPhotos = [];\n        const previewContainer = querySelector<HTMLElement>('#photosPreview');\n        if (previewContainer) {\n          previewContainer.innerHTML = '';\n        }\n        \n      } catch (error) {\n        console.error('Form submission error:', error);\n        showFormMessage('Form submission error. Please try again or contact us directly.', 'error');\n      } finally {\n        // Restore button state\n        if (submitBtn) {\n          submitBtn.disabled = false;\n          submitBtn.textContent = originalText;\n        }\n      }\n    } else {\n      // Scroll to first error field\n      const firstError = form.querySelector<HTMLElement>('.error');\n      if (firstError) {\n        firstError.scrollIntoView({ behavior: 'smooth', block: 'center' });\n        firstError.focus();\n      }\n    }\n  });\n}\n\n/**\n * Convert File to base64 string\n */\nfunction fileToBase64(file: File): Promise<string> {\n  return new Promise((resolve, reject) => {\n    const reader = new FileReader();\n    reader.onload = () => {\n      const result = reader.result as string;\n      // Remove data:image/...;base64, prefix\n      const base64 = result.split(',')[1];\n      resolve(base64);\n    };\n    reader.onerror = reject;\n    reader.readAsDataURL(file);\n  });\n}\n\n/**\n * Submit form data to backend API\n */\nasync function submitForm(formData: FormData): Promise<void> {\n  // Get backend URL from environment or use default\n  // In production with Nginx proxy, leave BACKEND_URL empty or undefined\n  // For local development, set window.BACKEND_URL = 'http://localhost:8080'\n  const backendUrl = (window as any).BACKEND_URL ?? '';\n  const apiEndpoint = `${backendUrl}/api/consultations`;\n  \n  // Prepare JSON payload matching ConsultationRequest DTO\n  const payload: any = {\n    firstName: formData.get('firstName') as string,\n    lastName: formData.get('lastName') as string || '',\n    email: formData.get('email') as string,\n    phone: formData.get('phone') as string || '',\n    projectType: formData.get('projectType') as string || '',\n    projectLocation: formData.get('location') as string || '',\n    estimatedBudget: formData.get('budget') as string || '',\n    preferredTimeline: formData.get('timeline') as string || '',\n    projectDetails: formData.get('details') as string,\n  };\n  \n  // Convert photos to base64 and add to payload\n  // Note: Backend needs to support 'photos' field in ConsultationRequest\n  // If backend doesn't support photos yet, they will be ignored\n  if (uploadedPhotos.length > 0) {\n    payload.photos = [];\n    for (const photo of uploadedPhotos) {\n      try {\n        const base64 = await fileToBase64(photo);\n        payload.photos.push({\n          filename: photo.name,\n          contentType: photo.type,\n          data: base64,\n          size: photo.size\n        });\n      } catch (error) {\n        console.error(`Failed to convert photo ${photo.name} to base64:`, error);\n      }\n    }\n  }\n  \n  // Send to backend\n  const response = await fetch(apiEndpoint, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json',\n    },\n    body: JSON.stringify(payload)\n  });\n  \n  if (!response.ok) {\n    const errorText = await response.text();\n    let errorMessage = 'Form submission failed';\n    \n    try {\n      const errorJson = JSON.parse(errorText);\n      errorMessage = errorJson.message || errorMessage;\n    } catch {\n      errorMessage = errorText || errorMessage;\n    }\n    \n    throw new Error(errorMessage);\n  }\n  \n  const result = await response.json();\n  console.log('Form submitted successfully:', result);\n}\n\n/**\n * Show form message (success or error)\n */\nfunction showFormMessage(message: string, type: 'success' | 'error'): void {\n  const form = querySelector<HTMLFormElement>('.consultation__form');\n  if (!form) return;\n  \n  // Remove existing message\n  const existingMessage = form.querySelector<HTMLElement>('.form__message');\n  if (existingMessage) {\n    existingMessage.remove();\n  }\n  \n  // Create message element\n  const messageEl = document.createElement('div');\n  messageEl.className = `form__message form__message--${type}`;\n  messageEl.textContent = message;\n  messageEl.style.cssText = `\n    padding: 16px;\n    border-radius: 8px;\n    margin-top: 16px;\n    text-align: center;\n    font-weight: 500;\n    ${type === 'success' \n      ? 'background: #d4edda; color: #155724; border: 1px solid #c3e6cb;' \n      : 'background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb;'}\n  `;\n  \n  form.appendChild(messageEl);\n  \n  // Auto-remove after 5 seconds\n  setTimeout(() => {\n    messageEl.remove();\n  }, 5000);\n}\n\n/**\n * Initialize form module\n */\nexport function initForm(): void {\n  initTextareaResize();\n  initPhotoUpload();\n  initFormValidation();\n}\n","/**\n * Module for dynamic effects background\n */\n\nimport { querySelector } from '../utils/dom';\n\ndeclare var anime: any;\n\n/**\n * Initialize animated gradient for hero overlay\n * Works on main page and subpages with images\n */\nexport function initAnimatedGradient(): void {\n    const hero = querySelector<HTMLElement>('.hero');\n    const overlay = querySelector<HTMLElement>('.hero__overlay');\n    \n    if (!hero || !overlay) {\n        return;\n    }\n\n    // For subpages with images, use animated gradient\n    const hasImage = hero.querySelector('.hero__image-bg img');\n    const isSubpage = hero.classList.contains('hero--subpage');\n    \n    // Skip animation only if it's subpage without image (shouldn't happen, but safety check)\n    if (isSubpage && !hasImage) {\n        return;\n    }\n\n    // Create animated gradient with very smooth transitions\n    overlay.style.background = `\n        linear-gradient(\n            ${45 + Math.sin(Date.now() / 5000) * 15}deg,\n            rgba(139, 0, 0, 0.2) 0%,\n            rgba(139, 0, 0, 0.18) 15%,\n            rgba(80, 0, 0, 0.25) 30%,\n            rgba(40, 0, 0, 0.3) 45%,\n            rgba(20, 0, 0, 0.35) 50%,\n            rgba(40, 0, 0, 0.3) 55%,\n            rgba(80, 0, 0, 0.25) 70%,\n            rgba(139, 0, 0, 0.18) 85%,\n            rgba(139, 0, 0, 0.2) 100%\n        )\n    `;\n\n    // Gradient animation with very smooth transitions (without black color)\n    let angle = 45;\n    const animateGradient = (): void => {\n        // Check if hero still exists\n        if (!hero || !overlay) {\n            return;\n        }\n        \n        angle += 0.2; // Even slower rotation\n        const baseRed = 0.18 + Math.sin(angle * 0.01) * 0.08;\n        const midRed1 = 0.22 + Math.cos(angle * 0.012) * 0.1;\n        const midRed2 = 0.28 + Math.sin(angle * 0.015) * 0.12;\n        const darkRed1 = 0.32 + Math.cos(angle * 0.01) * 0.1;\n        const darkRed2 = 0.35 + Math.sin(angle * 0.008) * 0.08;\n        \n        // Use only red shades (darker instead of black)\n        overlay.style.background = `\n            linear-gradient(\n                ${angle}deg,\n                rgba(139, 0, 0, ${baseRed}) 0%,\n                rgba(139, 0, 0, ${baseRed + 0.02}) 15%,\n                rgba(100, 0, 0, ${midRed1}) 30%,\n                rgba(60, 0, 0, ${midRed2}) 45%,\n                rgba(30, 0, 0, ${darkRed1}) 50%,\n                rgba(60, 0, 0, ${midRed2}) 55%,\n                rgba(100, 0, 0, ${midRed1}) 70%,\n                rgba(139, 0, 0, ${baseRed + 0.02}) 85%,\n                rgba(139, 0, 0, ${baseRed}) 100%\n            )\n        `;\n        \n        requestAnimationFrame(animateGradient);\n    };\n    \n    animateGradient();\n}\n\n/**\n * Create canvas with particles for hero section\n * Works only on main page, not on subpages\n * Function saved for future use in other sections\n */\nexport function initParticleBackground(): void {\n    const hero = querySelector<HTMLElement>('.hero');\n    // Do not use particles on subpages\n    if (!hero || hero.classList.contains('hero--subpage')) return;\n\n    const canvas = document.createElement('canvas');\n    canvas.className = 'hero__particles';\n    canvas.style.position = 'absolute';\n    canvas.style.top = '0';\n    canvas.style.left = '0';\n    canvas.style.width = '100%';\n    canvas.style.height = '100%';\n    canvas.style.zIndex = '1';\n    canvas.style.pointerEvents = 'none';\n    \n    const wrapper = querySelector<HTMLElement>('.hero__video-wrapper');\n    if (!wrapper) return;\n    \n    // Check if canvas already exists\n    const existingCanvas = wrapper.querySelector('.hero__particles');\n    if (existingCanvas) return;\n    \n    wrapper.appendChild(canvas);\n\n    const ctx = canvas.getContext('2d');\n    if (!ctx) return;\n\n    // Settings canvas\n    const resizeCanvas = (): void => {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n    };\n    resizeCanvas();\n    window.addEventListener('resize', resizeCanvas);\n\n    // Class particles\n    class Particle {\n        x: number;\n        y: number;\n        size: number;\n        speedX: number;\n        speedY: number;\n        opacity: number;\n        color: string;\n\n        constructor() {\n            this.x = Math.random() * canvas.width;\n            this.y = Math.random() * canvas.height;\n            this.size = Math.random() * 2 + 1;\n            this.speedX = (Math.random() - 0.5) * 0.5;\n            this.speedY = (Math.random() - 0.5) * 0.5;\n            this.opacity = Math.random() * 0.5 + 0.2;\n            this.color = Math.random() > 0.7 ? 'rgba(139, 0, 0, 0.6)' : 'rgba(255, 255, 255, 0.3)';\n        }\n\n        update(): void {\n            this.x += this.speedX;\n            this.y += this.speedY;\n\n            // Bounce from edges\n            if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;\n            if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;\n\n            // Ensure, that particles stay within bounds\n            this.x = Math.max(0, Math.min(canvas.width, this.x));\n            this.y = Math.max(0, Math.min(canvas.height, this.y));\n        }\n\n        draw(): void {\n            if (!ctx) return;\n            ctx.beginPath();\n            ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);\n            const colorValue = this.color.includes('139, 0, 0') \n                ? `rgba(139, 0, 0, ${this.opacity})` \n                : `rgba(255, 255, 255, ${this.opacity})`;\n            ctx.fillStyle = colorValue;\n            ctx.fill();\n        }\n    }\n\n    // Create particles array\n    const particles: Particle[] = [];\n    const particleCount = Math.min(50, Math.floor((canvas.width * canvas.height) / 15000));\n    \n    for (let i = 0; i < particleCount; i++) {\n        particles.push(new Particle());\n    }\n\n    // Function animation\n    const animate = (): void => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n\n        // Update and draw particles\n        particles.forEach(particle => {\n            particle.update();\n            particle.draw();\n        });\n\n        // Draw lines between close particles\n        for (let i = 0; i < particles.length; i++) {\n            for (let j = i + 1; j < particles.length; j++) {\n                const dx = particles[i].x - particles[j].x;\n                const dy = particles[i].y - particles[j].y;\n                const distance = Math.sqrt(dx * dx + dy * dy);\n\n                if (distance < 150) {\n                    ctx.beginPath();\n                    ctx.strokeStyle = `rgba(255, 255, 255, ${0.1 * (1 - distance / 150)})`;\n                    ctx.lineWidth = 1;\n                    ctx.moveTo(particles[i].x, particles[i].y);\n                    ctx.lineTo(particles[j].x, particles[j].y);\n                    ctx.stroke();\n                }\n            }\n        }\n\n        requestAnimationFrame(animate);\n    };\n\n    animate();\n}\n\n/**\n * Initialize parallax effect for hero video only\n * Images should be static (no parallax)\n */\nexport function initParallaxEffect(): void {\n    const video = querySelector<HTMLVideoElement>('.hero__video');\n    // Images are static, no parallax effect\n    \n    if (!video) return;\n\n    let ticking = false;\n\n    const handleScroll = (): void => {\n        if (!ticking) {\n            window.requestAnimationFrame(() => {\n                const scrolled = window.pageYOffset;\n                const rate = scrolled * 0.5;\n                \n                if (video) {\n                    video.style.transform = `translateY(${rate}px)`;\n                }\n                \n                ticking = false;\n            });\n            ticking = true;\n        }\n    };\n\n    window.addEventListener('scroll', handleScroll, { passive: true });\n}\n\n/**\n * Initialize all background effects\n */\nexport function initBackgroundEffects(): void {\n    initAnimatedGradient();\n    initParticleBackground();\n    initParallaxEffect();\n}\n","// Footer section component\n\nexport interface FooterLink {\n  /** Link text */\n  text: string;\n  /** URL reference */\n  href: string;\n  /** Whether to open in new tab */\n  target?: '_blank' | '_self';\n}\n\nexport interface FooterSocial {\n  /** Social network URL */\n  href: string;\n  /** Icon path */\n  iconSrc: string;\n  /** Alt text for icon */\n  alt: string;\n  /** Whether to open in new tab */\n  target?: '_blank' | '_self';\n}\n\nexport interface FooterContact {\n  /** Contact text */\n  text: string;\n  /** URL (tel:, mailto:, or regular URL) */\n  href: string;\n  /** Whether to open in new tab */\n  target?: '_blank' | '_self';\n}\n\nexport interface FooterConfig {\n  /** Company logo */\n  logo: {\n    src: string;\n    alt: string;\n  };\n  /** Contact information */\n  contacts: FooterContact[];\n  /** Social networks */\n  socials: FooterSocial[];\n  /** Quick links */\n  quickLinks: FooterLink[];\n  /** Service areas */\n  serviceAreas: string[];\n  /** Our services */\n  ourServices: FooterLink[];\n  /** Copyright text */\n  copyright: string;\n  /** Additional classes for footer */\n  additionalClasses?: string;\n}\n\n/**\n * Generate HTML for Footer section\n */\nexport function generateFooterHTML(config: FooterConfig): string {\n  const {\n    logo,\n    contacts,\n    socials,\n    quickLinks,\n    serviceAreas,\n    ourServices,\n    copyright,\n    additionalClasses = ''\n  } = config;\n\n  const footerClasses = ['footer', additionalClasses].filter(Boolean).join(' ');\n\n  // Generate contact links\n  const contactsHTML = contacts\n    .map(\n      contact => `\n      <a class=\"footer__link\" href=\"${contact.href}\" ${contact.target ? `target=\"${contact.target}\"` : ''}>\n        ${contact.text}\n      </a>`\n    )\n    .join('');\n\n  // Generate social networks\n  const socialsHTML = socials\n    .map(\n      social => `\n        <a href=\"${social.href}\" ${social.target || '_blank' ? `target=\"${social.target || '_blank'}\"` : ''} class=\"footer__icon\">\n          <img src=\"${social.iconSrc}\" alt=\"${social.alt}\" loading=\"lazy\" decoding=\"async\">\n        </a>`\n    )\n    .join('');\n\n  // Generate quick links\n  const quickLinksHTML = quickLinks\n    .map(\n      link => `\n            <li><a href=\"${link.href}\" ${link.target ? `target=\"${link.target}\"` : ''}>${link.text}</a></li>`\n    )\n    .join('');\n\n  // Generate service areas\n  const serviceAreasHTML = serviceAreas\n    .map(area => `<li>${area}</li>`)\n    .join('');\n\n  // Generate our services\n  const ourServicesHTML = ourServices\n    .map(\n      service => `\n            <li><a href=\"${service.href}\" ${service.target ? `target=\"${service.target}\"` : ''}>${service.text}</a></li>`\n    )\n    .join('');\n\n  return `\n    <footer class=\"${footerClasses}\">\n      <section class=\"footer__section\">\n        <div class=\"footer__container\">\n          <!-- Brand / Contacts -->\n          <div class=\"footer__col footer__brand\">\n            <div class=\"footer__logo\">\n              <img src=\"${logo.src}\" alt=\"${logo.alt}\" loading=\"lazy\" decoding=\"async\">\n            </div>\n            ${contactsHTML}\n            <div class=\"footer__socials\">\n              ${socialsHTML}\n            </div>\n          </div>\n\n          <!-- Quick Links -->\n          <div class=\"footer__col\">\n            <h4 class=\"footer__title\">Quick Links</h4>\n            <nav class=\"footer__nav\">\n              <ul>\n                ${quickLinksHTML}\n              </ul>\n            </nav>\n          </div>\n\n          <!-- Service Areas -->\n          <div class=\"footer__col\">\n            <h4 class=\"footer__title\">Service Areas</h4>\n            <ul class=\"footer__list\">\n              ${serviceAreasHTML}\n            </ul>\n          </div>\n\n          <!-- Our Services -->\n          <div class=\"footer__col\">\n            <h4 class=\"footer__title\">Our Services</h4>\n            <nav class=\"footer__nav\">\n              <ul>\n                ${ourServicesHTML}\n              </ul>\n            </nav>\n          </div>\n        </div>\n\n        <div class=\"footer__bottom\">\n          <div class=\"footer__bottom-logo\">\n            <img src=\"${logo.src}\" alt=\"${logo.alt}\" loading=\"lazy\" decoding=\"async\">\n          </div>\n          <p>${copyright}</p>\n        </div>\n      </section>\n    </footer>\n  `.trim();\n}\n\n/**\n * Insert Footer section into DOM\n */\nexport function insertFooter(\n  container: HTMLElement | string,\n  config: FooterConfig\n): HTMLElement | null {\n  const html = generateFooterHTML(config);\n\n  let targetElement: HTMLElement | null = null;\n\n  if (typeof container === 'string') {\n    targetElement = document.querySelector<HTMLElement>(container);\n  } else {\n    targetElement = container;\n  }\n\n  if (!targetElement) {\n    console.error('Footer container not found');\n    return null;\n  }\n\n  // If container is body, replace only footer\n  if (targetElement === document.body) {\n    const existingFooter = targetElement.querySelector<HTMLElement>('.footer');\n    if (existingFooter) {\n      existingFooter.outerHTML = html;\n      return targetElement.querySelector<HTMLElement>('.footer');\n    } else {\n      // If footer doesn't exist, add to end of body\n      targetElement.insertAdjacentHTML('beforeend', html);\n      return targetElement.querySelector<HTMLElement>('.footer');\n    }\n  } else {\n    // For other containers replace innerHTML\n    targetElement.innerHTML = html;\n    return targetElement.querySelector<HTMLElement>('.footer');\n  }\n}\n\n/**\n * Update existing Footer section\n */\nexport function updateFooter(\n  footerElement: HTMLElement | string,\n  config: Partial<FooterConfig>\n): HTMLElement | null {\n  let footer: HTMLElement | null = null;\n\n  if (typeof footerElement === 'string') {\n    footer = document.querySelector<HTMLElement>(footerElement);\n  } else {\n    footer = footerElement;\n  }\n\n  if (!footer) {\n    console.error('Footer element not found');\n    return null;\n  }\n\n  // Update logo\n  if (config.logo) {\n    const logoImages = footer.querySelectorAll<HTMLImageElement>('.footer__logo img, .footer__bottom-logo img');\n    logoImages.forEach(img => {\n      img.src = config.logo!.src;\n      img.alt = config.logo!.alt;\n    });\n  }\n\n  // Update contacts\n  if (config.contacts) {\n    const contactsContainer = footer.querySelector<HTMLElement>('.footer__brand');\n    if (contactsContainer) {\n      const existingLinks = contactsContainer.querySelectorAll<HTMLElement>('.footer__link');\n      existingLinks.forEach(link => link.remove());\n\n      config.contacts.forEach(contact => {\n        const link = document.createElement('a');\n        link.className = 'footer__link';\n        link.href = contact.href;\n        link.textContent = contact.text;\n        if (contact.target) {\n          link.target = contact.target;\n        }\n        const logo = contactsContainer.querySelector('.footer__logo');\n        if (logo) {\n          logo.insertAdjacentElement('afterend', link);\n        }\n      });\n    }\n  }\n\n  // Update social networks\n  if (config.socials) {\n    const socialsContainer = footer.querySelector<HTMLElement>('.footer__socials');\n    if (socialsContainer) {\n      socialsContainer.innerHTML = config.socials\n        .map(\n          social => `\n            <a href=\"${social.href}\" ${social.target || '_blank' ? `target=\"${social.target || '_blank'}\"` : ''} class=\"footer__icon\">\n              <img src=\"${social.iconSrc}\" alt=\"${social.alt}\" loading=\"lazy\" decoding=\"async\">\n            </a>`\n        )\n        .join('');\n    }\n  }\n\n  // Update quick links\n  if (config.quickLinks) {\n    const quickLinksContainer = footer.querySelector<HTMLElement>('.footer__nav ul');\n    if (quickLinksContainer) {\n      quickLinksContainer.innerHTML = config.quickLinks\n        .map(\n          link => `\n            <li><a href=\"${link.href}\" ${link.target ? `target=\"${link.target}\"` : ''}>${link.text}</a></li>`\n        )\n        .join('');\n    }\n  }\n\n  // Update service areas\n  if (config.serviceAreas) {\n    const serviceAreasContainer = footer.querySelector<HTMLElement>('.footer__list');\n    if (serviceAreasContainer) {\n      serviceAreasContainer.innerHTML = config.serviceAreas\n        .map(area => `<li>${area}</li>`)\n        .join('');\n    }\n  }\n\n  // Update our services\n  if (config.ourServices) {\n    // Find container for Our Services (last footer__nav after Service Areas)\n    const allCols = footer.querySelectorAll<HTMLElement>('.footer__col');\n    let ourServicesContainer: HTMLElement | null = null;\n    \n    // Search for Our Services section by heading\n    for (const col of allCols) {\n      const title = col.querySelector<HTMLElement>('.footer__title');\n      if (title && title.textContent === 'Our Services') {\n        const nav = col.querySelector<HTMLElement>('.footer__nav ul');\n        if (nav) {\n          ourServicesContainer = nav;\n          break;\n        }\n      }\n    }\n\n    // If container not found, create new section\n    if (!ourServicesContainer) {\n      const serviceAreasCol = Array.from(allCols).find(col => {\n        const title = col.querySelector<HTMLElement>('.footer__title');\n        return title && title.textContent === 'Service Areas';\n      });\n\n      if (serviceAreasCol && serviceAreasCol.parentElement) {\n        const newCol = document.createElement('div');\n        newCol.className = 'footer__col';\n        newCol.innerHTML = `\n          <h4 class=\"footer__title\">Our Services</h4>\n          <nav class=\"footer__nav\">\n            <ul>\n              ${config.ourServices\n                .map(\n                  service => `\n                <li><a href=\"${service.href}\" ${service.target ? `target=\"${service.target}\"` : ''}>${service.text}</a></li>`\n                )\n                .join('')}\n            </ul>\n          </nav>\n        `;\n        serviceAreasCol.insertAdjacentElement('afterend', newCol);\n      }\n    } else {\n      // Update existing container\n      ourServicesContainer.innerHTML = config.ourServices\n        .map(\n          service => `\n            <li><a href=\"${service.href}\" ${service.target ? `target=\"${service.target}\"` : ''}>${service.text}</a></li>`\n        )\n        .join('');\n    }\n  }\n\n  // Update copyright\n  if (config.copyright) {\n    const copyrightEl = footer.querySelector<HTMLElement>('.footer__bottom p');\n    if (copyrightEl) {\n      copyrightEl.textContent = config.copyright;\n    }\n  }\n\n  return footer;\n}\n","// Module for initializing Footer sections\n\nimport { insertFooter, updateFooter, type FooterConfig, type FooterLink } from '../components/Footer';\n\n/**\n * Get current page name (e.g., 'index.html', 'kitchen-renovation.html')\n */\nfunction getCurrentPage(): string {\n  const path = window.location.pathname;\n  const page = path.split('/').pop() || 'index.html';\n  return page;\n}\n\n/**\n * Check if current page is the main index page\n */\nfunction isMainPage(): boolean {\n  const currentPage = getCurrentPage();\n  return currentPage === 'index.html' || currentPage === '' || currentPage === '/';\n}\n\n/**\n * Normalize Quick Links hrefs - add index.html prefix for anchor links on non-main pages\n */\nfunction normalizeQuickLinks(quickLinks: FooterLink[]): FooterLink[] {\n  const isMain = isMainPage();\n  \n  return quickLinks.map(link => {\n    // If it's an anchor link (starts with #) and we're not on main page, add index.html\n    if (link.href.startsWith('#') && !isMain) {\n      return {\n        ...link,\n        href: `index.html${link.href}`\n      };\n    }\n    return link;\n  });\n}\n\n/**\n * Default Footer configuration\n */\nconst defaultFooterConfig: FooterConfig = {\n  logo: {\n    src: 'img/logo-red.svg',\n    alt: 'Style Homes Logo'\n  },\n  contacts: [\n    {\n      text: 'Washington License: STYLEHL751CS',\n      href: 'https://secure.lni.wa.gov/verify/Detail.aspx?UBI=605394148&LIC=STYLEHL751CS&SAW=',\n      target: '_blank'\n    },\n    {\n      text: 'Oregon CCB: 259642',\n      href: 'https://search.ccb.state.or.us/search/list_results.aspx',\n      target: '_blank'\n    },\n    {\n      text: '+1 (360) 859 6482',\n      href: 'tel:+13608596482'\n    },\n    {\n      text: 'stylehomesusa@icloud.com',\n      href: 'mailto:stylehomesusa@icloud.com'\n    }\n  ],\n  socials: [\n    {\n      href: 'https://www.instagram.com/style_homes_usa',\n      iconSrc: 'img/social_ico/instagram.avif',\n      alt: 'Instagram',\n      target: '_blank'\n    },\n    {\n      href: 'https://www.facebook.com/share/1ByVWrAJbJ/?mibextid=wwXIfr',\n      iconSrc: 'img/social_ico/facebook.svg',\n      alt: 'Facebook',\n      target: '_blank'\n    },\n    {\n      href: 'https://www.thumbtack.com/wa/vancouver/general-contractors/style-homes-llc/service/542227943368220678',\n      iconSrc: 'img/social_ico/thumbtack.avif',\n      alt: 'Thumbtack',\n      target: '_blank'\n    }\n  ],\n  quickLinks: [\n    { text: 'Home', href: '#hero' },\n    { text: 'Services', href: '#services' },\n    { text: 'Projects', href: '#projects' },\n    { text: 'About', href: '#about' },\n    { text: 'Get Free Quote', href: '#consultation' },\n    { text: 'FAQ', href: '#faq' }\n  ],\n  serviceAreas: [\n    'Portland, OR +50 miles',\n    'Vancouver, WA +50 miles'\n  ],\n  ourServices: [\n    { text: 'Wood and Panel Wall Decor', href: 'wood-and-panel-wall-decor.html' },\n    { text: 'Kitchen Renovation', href: 'kitchen-renovation.html' },\n    { text: 'Bathroom Renovation', href: 'bathroom-renovation.html' },\n    { text: 'Whole-Home Transformation', href: 'whole-home-transformation.html' }\n  ],\n  copyright: ' Style Homes 2025'\n};\n\n/**\n * Initialize Footer section on current page\n */\nexport function initFooter(): void {\n  const existingFooter = document.querySelector<HTMLElement>('.footer');\n  \n  // Normalize quick links based on current page\n  const normalizedConfig: FooterConfig = {\n    ...defaultFooterConfig,\n    quickLinks: normalizeQuickLinks(defaultFooterConfig.quickLinks)\n  };\n  \n  if (existingFooter) {\n    // If footer already exists, update it via updateFooter\n    updateFooter(existingFooter, normalizedConfig);\n  } else {\n    // If footer doesn't exist, insert new one\n    const body = document.querySelector<HTMLElement>('body');\n    if (body) {\n      insertFooter(body, normalizedConfig);\n    }\n  }\n}\n\n/**\n * Initialize Footer with custom configuration\n */\nexport function initFooterWithConfig(config: FooterConfig): void {\n  const body = document.querySelector<HTMLElement>('body');\n  if (body) {\n    insertFooter(body, config);\n  }\n}\n","// Lightbox component for viewing images in fullscreen\n\nexport interface LightboxOptions {\n  /** Animation duration in ms */\n  animationDuration?: number;\n  /** Enable swipe navigation */\n  enableSwipe?: boolean;\n  /** Enable keyboard navigation */\n  enableKeyboard?: boolean;\n  /** Close on background click */\n  closeOnBackdrop?: boolean;\n}\n\nexport class Lightbox {\n  private overlay: HTMLElement | null = null;\n  private content: HTMLElement | null = null;\n  private image: HTMLImageElement | null = null;\n  private closeBtn: HTMLElement | null = null;\n  private prevBtn: HTMLElement | null = null;\n  private nextBtn: HTMLElement | null = null;\n  private counter: HTMLElement | null = null;\n  \n  private images: string[] = [];\n  private currentIndex: number = 0;\n  private isOpen: boolean = false;\n  \n  private options: Required<LightboxOptions>;\n  \n  // Touch handling\n  private touchStartX: number = 0;\n  private touchEndX: number = 0;\n  \n  // Bound handlers for cleanup\n  private keydownHandler: (e: KeyboardEvent) => void;\n  private touchStartHandler: (e: TouchEvent) => void;\n  private touchEndHandler: (e: TouchEvent) => void;\n\n  constructor(options: LightboxOptions = {}) {\n    this.options = {\n      animationDuration: options.animationDuration ?? 300,\n      enableSwipe: options.enableSwipe ?? true,\n      enableKeyboard: options.enableKeyboard ?? true,\n      closeOnBackdrop: options.closeOnBackdrop ?? true,\n    };\n    \n    this.keydownHandler = this.handleKeydown.bind(this);\n    this.touchStartHandler = this.handleTouchStart.bind(this);\n    this.touchEndHandler = this.handleTouchEnd.bind(this);\n    \n    this.createLightbox();\n  }\n\n  /**\n   * Create lightbox DOM elements\n   */\n  private createLightbox(): void {\n    // Create overlay\n    this.overlay = document.createElement('div');\n    this.overlay.className = 'lightbox-overlay';\n    this.overlay.innerHTML = `\n      <div class=\"lightbox-content\">\n        <button class=\"lightbox-close\" aria-label=\"Close\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <line x1=\"18\" y1=\"6\" x2=\"6\" y2=\"18\"></line>\n            <line x1=\"6\" y1=\"6\" x2=\"18\" y2=\"18\"></line>\n          </svg>\n        </button>\n        <button class=\"lightbox-nav lightbox-prev\" aria-label=\"Previous\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <polyline points=\"15 18 9 12 15 6\"></polyline>\n          </svg>\n        </button>\n        <div class=\"lightbox-image-container\">\n          <img class=\"lightbox-image\" src=\"\" alt=\"Fullscreen image\">\n        </div>\n        <button class=\"lightbox-nav lightbox-next\" aria-label=\"Next\">\n          <svg viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\">\n            <polyline points=\"9 18 15 12 9 6\"></polyline>\n          </svg>\n        </button>\n        <div class=\"lightbox-counter\"></div>\n      </div>\n    `;\n    \n    document.body.appendChild(this.overlay);\n    \n    // Get references\n    this.content = this.overlay.querySelector('.lightbox-content');\n    this.image = this.overlay.querySelector('.lightbox-image');\n    this.closeBtn = this.overlay.querySelector('.lightbox-close');\n    this.prevBtn = this.overlay.querySelector('.lightbox-prev');\n    this.nextBtn = this.overlay.querySelector('.lightbox-next');\n    this.counter = this.overlay.querySelector('.lightbox-counter');\n    \n    // Add event listeners\n    this.closeBtn?.addEventListener('click', () => this.close());\n    this.prevBtn?.addEventListener('click', () => this.showPrevious());\n    this.nextBtn?.addEventListener('click', () => this.showNext());\n    \n    if (this.options.closeOnBackdrop) {\n      this.overlay.addEventListener('click', (e) => {\n        if (e.target === this.overlay) {\n          this.close();\n        }\n      });\n    }\n  }\n\n  /**\n   * Open lightbox with images\n   */\n  public open(images: string[], startIndex: number = 0): void {\n    if (this.isOpen || !this.overlay) return;\n    \n    this.images = images;\n    this.currentIndex = startIndex;\n    this.isOpen = true;\n    \n    // Show overlay\n    this.overlay.classList.add('active');\n    document.body.style.overflow = 'hidden';\n    \n    // Show current image\n    this.showImage(this.currentIndex);\n    \n    // Update navigation visibility\n    this.updateNavigation();\n    \n    // Add event listeners\n    if (this.options.enableKeyboard) {\n      document.addEventListener('keydown', this.keydownHandler);\n    }\n    \n    if (this.options.enableSwipe && this.content) {\n      this.content.addEventListener('touchstart', this.touchStartHandler);\n      this.content.addEventListener('touchend', this.touchEndHandler);\n    }\n  }\n\n  /**\n   * Close lightbox\n   */\n  public close(): void {\n    if (!this.isOpen || !this.overlay) return;\n    \n    this.isOpen = false;\n    this.overlay.classList.remove('active');\n    document.body.style.overflow = '';\n    \n    // Remove event listeners\n    document.removeEventListener('keydown', this.keydownHandler);\n    \n    if (this.content) {\n      this.content.removeEventListener('touchstart', this.touchStartHandler);\n      this.content.removeEventListener('touchend', this.touchEndHandler);\n    }\n  }\n\n  /**\n   * Show specific image\n   */\n  private showImage(index: number): void {\n    if (!this.image || !this.counter) return;\n    \n    // Add loading state\n    this.image.classList.add('loading');\n    \n    const img = new Image();\n    img.onload = () => {\n      if (this.image) {\n        this.image.src = this.images[index];\n        this.image.classList.remove('loading');\n      }\n    };\n    img.src = this.images[index];\n    \n    // Update counter\n    this.counter.textContent = `${index + 1} / ${this.images.length}`;\n  }\n\n  /**\n   * Show previous image\n   */\n  public showPrevious(): void {\n    if (this.images.length <= 1) return;\n    \n    this.currentIndex = this.currentIndex > 0 \n      ? this.currentIndex - 1 \n      : this.images.length - 1;\n    \n    this.showImage(this.currentIndex);\n  }\n\n  /**\n   * Show next image\n   */\n  public showNext(): void {\n    if (this.images.length <= 1) return;\n    \n    this.currentIndex = this.currentIndex < this.images.length - 1 \n      ? this.currentIndex + 1 \n      : 0;\n    \n    this.showImage(this.currentIndex);\n  }\n\n  /**\n   * Update navigation buttons visibility\n   */\n  private updateNavigation(): void {\n    const shouldShowNav = this.images.length > 1;\n    \n    if (this.prevBtn) {\n      this.prevBtn.style.display = shouldShowNav ? 'flex' : 'none';\n    }\n    if (this.nextBtn) {\n      this.nextBtn.style.display = shouldShowNav ? 'flex' : 'none';\n    }\n    if (this.counter) {\n      this.counter.style.display = shouldShowNav ? 'block' : 'none';\n    }\n  }\n\n  /**\n   * Handle keyboard events\n   */\n  private handleKeydown(e: KeyboardEvent): void {\n    switch (e.key) {\n      case 'Escape':\n        this.close();\n        break;\n      case 'ArrowLeft':\n        this.showPrevious();\n        break;\n      case 'ArrowRight':\n        this.showNext();\n        break;\n    }\n  }\n\n  /**\n   * Handle touch start\n   */\n  private handleTouchStart(e: TouchEvent): void {\n    this.touchStartX = e.touches[0].clientX;\n  }\n\n  /**\n   * Handle touch end\n   */\n  private handleTouchEnd(e: TouchEvent): void {\n    this.touchEndX = e.changedTouches[0].clientX;\n    const diff = this.touchStartX - this.touchEndX;\n    const threshold = 50;\n    \n    if (Math.abs(diff) > threshold) {\n      if (diff > 0) {\n        this.showNext();\n      } else {\n        this.showPrevious();\n      }\n    }\n  }\n\n  /**\n   * Destroy lightbox\n   */\n  public destroy(): void {\n    this.close();\n    this.overlay?.remove();\n  }\n}\n\n// Singleton instance for global use\nlet lightboxInstance: Lightbox | null = null;\n\n/**\n * Get or create global lightbox instance\n */\nexport function getLightbox(): Lightbox {\n  if (!lightboxInstance) {\n    lightboxInstance = new Lightbox();\n  }\n  return lightboxInstance;\n}\n\n/**\n * Initialize lightbox for carousel images\n * Adds click handlers to all carousel images\n */\nexport function initCarouselLightbox(): void {\n  const lightbox = getLightbox();\n  \n  // Add click handlers to all carousel images\n  document.addEventListener('click', (e) => {\n    const target = e.target as HTMLElement;\n    \n    // Check if clicked on carousel image\n    if (target.tagName === 'IMG' && target.closest('.carousel-track')) {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const carousel = target.closest('.project-card__carousel');\n      if (!carousel) return;\n      \n      // Get all original images (exclude clones for infinite loop)\n      const track = carousel.querySelector('.carousel-track');\n      if (!track) return;\n      \n      const allImages = Array.from(track.querySelectorAll('img'));\n      \n      // Filter out duplicate images (clones for infinite loop)\n      // Clone images have same src, we need unique ones\n      const seenSrcs = new Set<string>();\n      const uniqueImages: string[] = [];\n      \n      allImages.forEach(img => {\n        const src = (img as HTMLImageElement).src;\n        if (!seenSrcs.has(src)) {\n          seenSrcs.add(src);\n          uniqueImages.push(src);\n        }\n      });\n      \n      // Find clicked image index\n      const clickedSrc = (target as HTMLImageElement).src;\n      let startIndex = uniqueImages.indexOf(clickedSrc);\n      if (startIndex === -1) startIndex = 0;\n      \n      // Open lightbox\n      lightbox.open(uniqueImages, startIndex);\n    }\n  });\n}\n","// Phone dropdown module for mobile devices\n// Replaces phone number text with icon + dropdown on small screens\n\n/**\n * Phone contact configuration\n */\ninterface PhoneContact {\n  number: string;\n  label: string;\n  href: string;\n}\n\n/**\n * Default phone contacts\n */\nconst phoneContacts: PhoneContact[] = [\n  {\n    number: '+1 (360) 859 6482',\n    label: 'Call us',\n    href: 'tel:+13608596482'\n  }\n];\n\n/**\n * Create phone dropdown HTML\n */\nfunction createPhoneDropdown(contacts: PhoneContact[]): string {\n  const dropdownItems = contacts.map(contact => `\n    <a href=\"${contact.href}\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z\"/>\n      </svg>\n      ${contact.number}\n    </a>\n  `).join('');\n\n  return `\n    <button class=\"header__phone-btn\" aria-label=\"Phone menu\" aria-expanded=\"false\">\n      <svg viewBox=\"0 0 24 24\">\n        <path d=\"M20.01 15.38c-1.23 0-2.42-.2-3.53-.56a.977.977 0 0 0-1.01.24l-1.57 1.97c-2.83-1.35-5.48-3.9-6.89-6.83l1.95-1.66c.27-.28.35-.67.24-1.02-.37-1.11-.56-2.3-.56-3.53 0-.54-.45-.99-.99-.99H4.19C3.65 3 3 3.24 3 3.99 3 13.28 10.73 21 20.01 21c.71 0 .99-.63.99-1.18v-3.45c0-.54-.45-.99-.99-.99z\"/>\n      </svg>\n    </button>\n    <div class=\"header__phone-dropdown\">\n      ${dropdownItems}\n    </div>\n  `;\n}\n\n/**\n * Initialize phone dropdown functionality\n */\nexport function initPhoneDropdown(): void {\n  // Find all phone links in header\n  const phoneLinks = document.querySelectorAll<HTMLAnchorElement>('.header__phone');\n  \n  phoneLinks.forEach(phoneLink => {\n    // Check if already wrapped\n    if (phoneLink.parentElement?.classList.contains('header__phone-wrapper')) {\n      return;\n    }\n    \n    // Create wrapper\n    const wrapper = document.createElement('div');\n    wrapper.className = 'header__phone-wrapper';\n    \n    // Insert wrapper before phone link\n    phoneLink.parentNode?.insertBefore(wrapper, phoneLink);\n    \n    // Move phone link into wrapper\n    wrapper.appendChild(phoneLink);\n    \n    // Add dropdown HTML\n    wrapper.insertAdjacentHTML('beforeend', createPhoneDropdown(phoneContacts));\n    \n    // Get button reference\n    const btn = wrapper.querySelector<HTMLButtonElement>('.header__phone-btn');\n    \n    // Toggle dropdown on button click\n    btn?.addEventListener('click', (e) => {\n      e.preventDefault();\n      e.stopPropagation();\n      \n      const isActive = wrapper.classList.contains('active');\n      \n      // Close all other dropdowns\n      document.querySelectorAll('.header__phone-wrapper.active').forEach(w => {\n        w.classList.remove('active');\n        w.querySelector('.header__phone-btn')?.setAttribute('aria-expanded', 'false');\n      });\n      \n      // Toggle current\n      if (!isActive) {\n        wrapper.classList.add('active');\n        btn.setAttribute('aria-expanded', 'true');\n      }\n    });\n    \n    // Close dropdown when clicking outside\n    document.addEventListener('click', (e) => {\n      if (!wrapper.contains(e.target as Node)) {\n        wrapper.classList.remove('active');\n        btn?.setAttribute('aria-expanded', 'false');\n      }\n    });\n    \n    // Close on escape key\n    document.addEventListener('keydown', (e) => {\n      if (e.key === 'Escape' && wrapper.classList.contains('active')) {\n        wrapper.classList.remove('active');\n        btn?.setAttribute('aria-expanded', 'false');\n      }\n    });\n  });\n}\n","// Main entry file (using .js extension to avoid Windows MIME type issue)\n// Windows associates .ts with video/vnd.dlna.mpeg-tts\n\nimport './style.css';\n\n// Import modules (without .ts extension - Vite resolves automatically)\nimport { initHeaderScroll, initServicesDarkening } from './modules/header';\nimport {\n  initAutoBurgerMenu,\n  initSmoothScroll,\n  initActiveNavLink,\n  initMobileMenu\n} from './modules/navigation';\nimport { initAnimations } from './modules/animations';\nimport { initCarousels } from './modules/carousel';\nimport { initTestimonials } from './modules/testimonials';\nimport { initFAQ } from './modules/faq';\nimport { initForm } from './modules/form';\nimport { initBackgroundEffects } from './modules/background-effects';\nimport { initHero } from './modules/hero';\nimport { initFooter } from './modules/footer';\nimport { initCarouselLightbox } from './components/Lightbox';\nimport { initPhoneDropdown } from './modules/phone-dropdown';\n\nconsole.log('Style Homes website loaded');\n\n// Hide page loader when content is ready\nfunction hidePageLoader() {\n  const loader = document.getElementById('pageLoader');\n  if (loader) {\n    loader.classList.add('hidden');\n    // Remove from DOM after transition\n    setTimeout(() => {\n      loader.remove();\n    }, 500);\n  }\n}\n\n// Initialize all modules\ndocument.addEventListener('DOMContentLoaded', () => {\n  // CRITICAL: Ensure header and all its children are visible immediately\n  // This prevents any CSS/JS issues from hiding content\n  const header = document.querySelector<HTMLElement>('.header');\n  if (header) {\n    header.style.opacity = '1';\n    header.style.visibility = 'visible';\n    header.style.display = 'block';\n  }\n  \n  // Ensure all header children are visible\n  const headerElements = document.querySelectorAll<HTMLElement>('.header__logo, .header__nav, .header__actions, .header__burger');\n  headerElements.forEach(el => {\n    el.style.opacity = '1';\n    el.style.visibility = 'visible';\n  });\n  \n  // Additional safety: force visibility after a short delay\n  setTimeout(() => {\n    if (header) {\n      header.style.opacity = '1';\n      header.style.visibility = 'visible';\n    }\n    headerElements.forEach(el => {\n      el.style.opacity = '1';\n      el.style.visibility = 'visible';\n    });\n  }, 100);\n  \n  // Safe initialization wrapper\n  function safeInit(name: string, fn: () => void): void {\n    try {\n      fn();\n    } catch (error) {\n      console.error(`Error initializing ${name}:`, error);\n    }\n  }\n\n  // Initialize header scroll effect\n  safeInit('headerScroll', initHeaderScroll);\n  \n  // Initialize services darkening effect\n  safeInit('servicesDarkening', initServicesDarkening);\n  \n  // Initialize auto burger menu (must be before initSmoothScroll)\n  safeInit('autoBurgerMenu', initAutoBurgerMenu);\n  \n  // Initialize mobile menu\n  safeInit('mobileMenu', initMobileMenu);\n  \n  // Initialize smooth scroll navigation (after initAutoBurgerMenu)\n  setTimeout(() => {\n    safeInit('smoothScroll', initSmoothScroll);\n  }, 0);\n  \n  // Initialize active nav link on scroll\n  safeInit('activeNavLink', initActiveNavLink);\n  \n  // Initialize animations (wait for AOS and anime.js to be loaded)\n  const waitForScripts = () => {\n    // Check if scripts are loaded, with timeout\n    let attempts = 0;\n    const maxAttempts = 50; // 5 seconds max wait\n    \n    const checkScripts = () => {\n      attempts++;\n      const aosLoaded = typeof window.AOS !== 'undefined';\n      const animeLoaded = typeof window.anime !== 'undefined';\n      \n      if (aosLoaded && animeLoaded) {\n        // Both scripts loaded, initialize animations\n        safeInit('animations', initAnimations);\n      } else if (attempts < maxAttempts) {\n        // Scripts not loaded yet, wait a bit more\n        setTimeout(checkScripts, 100);\n      } else {\n        // Timeout reached, initialize anyway (fallback will handle it)\n        console.warn('AOS or anime.js not loaded after timeout, initializing with fallback');\n        safeInit('animations', initAnimations);\n      }\n    };\n    \n    checkScripts();\n  };\n  \n  waitForScripts();\n  \n  // Initialize carousels\n  safeInit('carousels', initCarousels);\n  \n  // Initialize carousel lightbox (fullscreen image view)\n  safeInit('carouselLightbox', initCarouselLightbox);\n  \n  // Initialize phone dropdown for mobile\n  safeInit('phoneDropdown', initPhoneDropdown);\n  \n  // Testimonials now handled by Elfsight widget\n  // safeInit('testimonials', initTestimonials);\n  \n  // Initialize FAQ\n  safeInit('faq', initFAQ);\n  \n  // Initialize form\n  safeInit('form', initForm);\n  \n  // Initialize background effects\n  safeInit('backgroundEffects', initBackgroundEffects);\n  \n  // Initialize hero section (can update existing if needed)\n  // initHero(); // Uncomment if you need to dynamically update Hero\n  \n  // Initialize footer section\n  safeInit('footer', initFooter);\n  \n  // Hide page loader after a small delay to ensure CSS is loaded\n  setTimeout(() => {\n    hidePageLoader();\n  }, 300);\n});\n"],"names":["querySelector","selector","parent","querySelectorAll","getDatasetNumber","element","key","defaultValue","value","parsed","initHeaderScroll","header","handleScroll","initServicesDarkening","servicesSection","ticking","rect","windowHeight","sectionTop","sectionHeight","scrollProgress","opacity","scrollToElement","offset","behavior","offsetPosition","scrollToTop","closeMenuFunction","checkElementsCollision","initAutoBurgerMenu","nav","actions","burger","isMenuOpen","navRect","isTouching","resizeRequestId","scrollRequestId","initSmoothScroll","navLinks","link","e","href","targetId","targetElement","headerHeight","initActiveNavLink","sections","updateActiveLink","current","scrollY","section","sectionId","sectionBottom","viewportMiddle","initMobileMenu","closeMenuWithoutAnimation","isActive","closeMenu","navClose","mediaQuery","handleMediaChange","resizeTimer","isResizing","initAnimations","aosOptions","headerLogo","headerNav","headerActions","safetyTimeout","logoConfig","navConfig","index","linkConfig","actionsConfig","badgeConfig","heroCardConfig","heroTitleConfig","card","carousel","hoverConfig","leaveConfig","btn","enterConfig","Carousel","carouselElement","options","track","firstSlide","lastSlide","target","prevBtn","nextBtn","maxIndex","event","currentIndex","threshold","diff","carouselInstances","initCarousels","error","initFAQ","faqItems","item","question","answer","i","height","currentHeight","uploadedPhotos","initTextareaResize","textarea","newHeight","validateField","field","isValid","validateForm","form","requiredFields","isFormValid","markRequiredLabels","label","labelText","initPhotoUpload","fileInput","previewContainer","files","maxSize","allowedTypes","file","reader","photoItem","img","removeBtn","f","updateFileInput","dataTransfer","initFormValidation","submitBtn","originalText","formData","submitForm","showFormMessage","firstError","fileToBase64","resolve","reject","base64","apiEndpoint","payload","photo","response","errorText","errorMessage","result","message","type","existingMessage","messageEl","initForm","initAnimatedGradient","hero","overlay","hasImage","angle","animateGradient","baseRed","midRed1","midRed2","darkRed1","initParticleBackground","canvas","wrapper","ctx","resizeCanvas","Particle","colorValue","particles","particleCount","animate","particle","j","dx","dy","distance","initParallaxEffect","video","rate","initBackgroundEffects","generateFooterHTML","config","logo","contacts","socials","quickLinks","serviceAreas","ourServices","copyright","additionalClasses","footerClasses","contactsHTML","contact","socialsHTML","social","quickLinksHTML","serviceAreasHTML","area","ourServicesHTML","service","insertFooter","container","html","existingFooter","updateFooter","footerElement","footer","contactsContainer","socialsContainer","quickLinksContainer","serviceAreasContainer","allCols","ourServicesContainer","col","title","serviceAreasCol","newCol","copyrightEl","getCurrentPage","isMainPage","currentPage","normalizeQuickLinks","isMain","defaultFooterConfig","initFooter","normalizedConfig","body","Lightbox","images","startIndex","shouldShowNav","lightboxInstance","getLightbox","initCarouselLightbox","lightbox","allImages","seenSrcs","uniqueImages","src","clickedSrc","phoneContacts","createPhoneDropdown","initPhoneDropdown","phoneLink","w","hidePageLoader","loader","headerElements","el","safeInit","name","fn","attempts","maxAttempts","checkScripts","aosLoaded","animeLoaded"],"mappings":"ssBAKO,SAASA,EACdC,EACAC,EAAiC,SACvB,CACV,OAAOA,EAAO,cAAiBD,CAAQ,CACzC,CAKO,SAASE,EACdF,EACAC,EAAiC,SAClB,CACf,OAAOA,EAAO,iBAAoBD,CAAQ,CAC5C,CAcO,SAASG,EACdC,EACAC,EACAC,EAAuB,EACf,CACR,MAAMC,EAAQH,EAAQ,QAAQC,CAAG,EACjC,GAAI,CAACE,EAAO,OAAOD,EACnB,MAAME,EAAS,SAASD,EAAO,EAAE,EACjC,OAAO,MAAMC,CAAM,EAAIF,EAAeE,CACxC,CCnCO,SAASC,GAAyB,CACvC,MAAMC,EAASX,EAA2B,SAAS,EACnD,GAAI,CAACW,EAAQ,OAEb,MAAMC,EAAe,IAAY,CAC3B,OAAO,QAAU,GACnBD,EAAO,UAAU,IAAI,UAAU,EAE/BA,EAAO,UAAU,OAAO,UAAU,CAEtC,EAEA,OAAO,iBAAiB,SAAUC,CAAY,EAC9CA,EAAA,CACF,CAKO,SAASC,GAA8B,CAC5C,MAAMC,EAAkBd,EAA+B,WAAW,EAClE,GAAI,CAACc,EAAiB,OAEtB,IAAIC,EAAU,GAEd,MAAMH,EAAe,IAAY,CAC1BG,IACH,OAAO,sBAAsB,IAAM,CACjC,MAAMC,EAAOF,EAAgB,sBAAA,EACvBG,EAAe,OAAO,YACtBC,EAAaF,EAAK,IAClBG,EAAgBH,EAAK,OAG3B,IAAII,EAAiB,EAEjBF,EAAaD,GAAgBC,EAAa,CAACC,EAE7CC,EAAiB,KAAK,IAAI,EAAG,KAAK,IAAI,GAAIH,EAAeC,IAAeD,EAAeE,EAAgB,GAAI,CAAC,EACnGD,GAAc,CAACC,EAAgB,KAExCC,EAAiB,GAInB,MAAMC,EAAUD,EAAiB,GACjCN,EAAgB,MAAM,YAAY,mBAAoBO,EAAQ,UAAU,EAGpEA,EAAU,GACZP,EAAgB,UAAU,IAAI,UAAU,EAExCA,EAAgB,UAAU,OAAO,UAAU,EAG7CC,EAAU,EACZ,CAAC,EAEDA,EAAU,GAEd,EAEA,OAAO,iBAAiB,SAAUH,EAAc,CAAE,QAAS,GAAM,EACjEA,EAAA,CACF,CCnEO,SAASU,EACdjB,EACAkB,EAAiB,EACjBC,EAA2B,SACrB,CAEN,MAAMC,EADkBpB,EAAQ,sBAAA,EAAwB,IAAM,OAAO,YAC5BkB,EAEzC,OAAO,SAAS,CACd,IAAKE,EACL,SAAAD,CAAA,CACD,CACH,CAKO,SAASE,EAAYF,EAA2B,SAAgB,CACrE,OAAO,SAAS,CACd,IAAK,EACL,SAAAA,CAAA,CACD,CACH,CCpBO,IAAIG,EAA8C,KAC9CC,EAAwD,KAK5D,SAASC,GAA2B,CACzC,MAAMC,EAAM9B,EAA2B,cAAc,EAC/C+B,EAAU/B,EAA2B,kBAAkB,EACvDgC,EAAShC,EAA2B,iBAAiB,EACrDW,EAASX,EAA2B,SAAS,EAEnD,GAAI,CAAC8B,GAAO,CAACC,GAAW,CAACC,GAAU,CAACrB,EAAQ,OAE5CiB,EAAyB,UAAiB,CAExC,MAAMK,EAAaH,EAAI,UAAU,SAAS,QAAQ,EAClD,GAAIG,EACF,OAIF,GAAI,OAAO,YAAc,IAAK,CAC3BD,EAAuB,MAAM,QAAU,OACnCC,IACHH,EAAI,MAAM,QAAU,QAEtB,MACF,CAEA,MAAMI,EAAUJ,EAAI,sBAAA,EAIdK,EAHcJ,EAAQ,sBAAA,EAEJ,KAAOG,EAAQ,OACb,EAE1B,sBAAsB,IAAM,CACtBJ,EAAI,UAAU,SAAS,QAAQ,IAI/BK,GACFL,EAAI,MAAM,QAAU,OACpBE,EAAO,MAAM,QAAU,OACvBrB,EAAO,UAAU,IAAI,aAAa,IAElCqB,EAAO,MAAM,QAAU,OACvBF,EAAI,MAAM,QAAU,OACpBnB,EAAO,UAAU,OAAO,aAAa,GAEzC,CAAC,CACH,EAGAiB,EAAA,EAGA,IAAIQ,EAAiC,KACrC,OAAO,iBAAiB,SAAU,IAAM,CAClCA,GACF,qBAAqBA,CAAe,EAEtCA,EAAkB,sBAAsB,IAAM,CACxCR,GACFA,EAAA,CAEJ,CAAC,CACH,CAAC,EAGD,IAAIS,EAAiC,KACrC,OAAO,iBAAiB,SAAU,IAAM,CAClCP,EAAI,UAAU,SAAS,QAAQ,IAI/BO,GACF,qBAAqBA,CAAe,EAEtCA,EAAkB,sBAAsB,IAAM,CACxCT,GACFA,EAAA,CAEJ,CAAC,EACH,CAAC,CACH,CAKO,SAASU,GAAyB,CACvC,MAAMC,EAAWpC,EAAoC,8BAA8B,EAC7EQ,EAASX,EAA2B,SAAS,EAC7C8B,EAAM9B,EAA2B,cAAc,EAErDuC,EAAS,QAAQC,GAAQ,CACvBA,EAAK,iBAAiB,QAAUC,GAAkB,CAChD,MAAMC,EAAOF,EAAK,aAAa,MAAM,EACrC,GAAI,CAACE,EAAM,OAGX,GAAIA,IAAS,KAAOA,IAAS,QAAS,CACpCD,EAAE,eAAA,EAEEX,GAAOA,EAAI,UAAU,SAAS,QAAQ,GAAKH,GAC7CA,EAAA,EAGF,WAAW,IAAM,CACfD,EAAA,CACF,EAAGI,GAAOA,EAAI,UAAU,SAAS,QAAQ,EAAI,IAAM,CAAC,EACpD,MACF,CAEA,MAAMa,EAAWD,EAAK,UAAU,CAAC,EAC3BE,EAAgB,SAAS,eAAeD,CAAQ,EAElDC,IACFH,EAAE,eAAA,EAEEX,GAAOA,EAAI,UAAU,SAAS,QAAQ,GAAKH,GAC7CA,EAAA,EAGF,WAAW,IAAM,CACf,MAAMkB,EAAelC,EAASA,EAAO,aAAe,GACpDW,EAAgBsB,EAA8BC,CAAY,CAC5D,EAAGf,GAAOA,EAAI,UAAU,SAAS,QAAQ,EAAI,IAAM,CAAC,EAExD,CAAC,CACH,CAAC,CACH,CAKO,SAASgB,GAA0B,CACxC,MAAMC,EAAW5C,EAA8B,aAAa,EACtDoC,EAAWpC,EAAoC,8BAA8B,EAC7EQ,EAASX,EAA2B,SAAS,EAC9BW,GAASA,EAAO,aAErC,MAAMqC,EAAmB,IAAY,CACnC,IAAIC,EAAU,GACd,MAAMC,EAAU,OAAO,YACjBjC,EAAe,OAAO,YAGxBiC,EAAU,IACZD,EAAU,OAGVF,EAAS,QAAQI,GAAW,CAC1B,MAAMnC,EAAOmC,EAAQ,sBAAA,EACfC,EAAYD,EAAQ,aAAa,IAAI,EAE3C,GAAIC,EAAW,CAGb,MAAMlC,EAAaF,EAAK,IAClBqC,EAAgBrC,EAAK,OACrBsC,EAAiBrC,EAAe,EAGlCC,GAAcoC,GAAkBD,EAAgB,IAClDJ,EAAUG,EAEd,CACF,CAAC,EAGHb,EAAS,QAAQC,GAAQ,CACvBA,EAAK,UAAU,OAAO,QAAQ,EAC9B,MAAME,EAAOF,EAAK,aAAa,MAAM,GAGjCE,IAAS,IAAIO,CAAO,IACnBA,IAAY,SAAWP,IAAS,KAAOA,IAAS,WACnDF,EAAK,UAAU,IAAI,QAAQ,CAE/B,CAAC,CACH,EAEA,OAAO,iBAAiB,SAAUQ,EAAkB,CAAE,QAAS,GAAM,EACrEA,EAAA,CACF,CAKO,SAASO,GAAuB,CACrC,MAAMvB,EAAShC,EAA2B,iBAAiB,EACrD8B,EAAM9B,EAA2B,cAAc,EAC/CW,EAASX,EAA2B,SAAS,EAEnD,GAAI,CAACgC,GAAU,CAACF,GAAO,CAACnB,EAAQ,OAGhCqB,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAI,UAAU,OAAO,QAAQ,EACzBE,aAAkB,mBACpBA,EAAO,aAAa,gBAAiB,OAAO,EAE9C,SAAS,KAAK,MAAM,SAAW,GAE/B,MAAMwB,EAA4B,IAAY,CAC5C,SAAS,KAAK,UAAU,IAAI,eAAe,EAC3CxB,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAI,UAAU,OAAO,QAAQ,EACzBE,aAAkB,mBACpBA,EAAO,aAAa,gBAAiB,OAAO,EAE9C,SAAS,KAAK,MAAM,SAAW,GAC/B,WAAW,IAAM,CACf,SAAS,KAAK,UAAU,OAAO,eAAe,CAChD,EAAG,EAAE,CACP,EAEAA,EAAO,iBAAiB,QAAUS,GAAkB,CAClDA,EAAE,gBAAA,EACFA,EAAE,eAAA,EAEF,MAAMgB,EAAWzB,EAAO,UAAU,SAAS,QAAQ,EACnDrB,EAAO,UAAU,OAAO,aAAa,EAErCqB,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAI,UAAU,OAAO,QAAQ,EACzBE,aAAkB,mBACpBA,EAAO,aAAa,gBAAiB,OAAO,CAACyB,CAAQ,CAAC,EAGnDA,GAaH3B,EAAI,MAAM,UAAY,oBACtBA,EAAI,MAAM,QAAU,IACpBA,EAAI,MAAM,WAAa,SACvB,SAAS,KAAK,MAAM,SAAW,GAE/B,WAAW,IAAM,CACVA,EAAI,UAAU,SAAS,QAAQ,IAClCA,EAAI,MAAM,QAAU,IAElBF,GACFA,EAAA,CAEJ,EAAG,GAAG,IAxBNE,EAAI,MAAM,QAAU,GACpBA,EAAI,MAAM,WAAa,GACvBA,EAAI,MAAM,QAAU,GACpBA,EAAI,MAAM,UAAY,GAEtBA,EAAI,MAAM,QAAU,OACpBA,EAAI,MAAM,WAAa,UACvBA,EAAI,MAAM,QAAU,IACpBA,EAAI,MAAM,UAAY,gBAEtB,SAAS,KAAK,MAAM,SAAW,SAgBnC,CAAC,EAED,MAAM4B,EAAY,IAAY,CAC5B1B,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAI,UAAU,OAAO,QAAQ,EACzBE,aAAkB,mBACpBA,EAAO,aAAa,gBAAiB,OAAO,EAG9CF,EAAI,MAAM,UAAY,oBACtBA,EAAI,MAAM,QAAU,IACpBA,EAAI,MAAM,WAAa,SACvB,SAAS,KAAK,MAAM,SAAW,GAE/B,WAAW,IAAM,CACVA,EAAI,UAAU,SAAS,QAAQ,IAClCA,EAAI,MAAM,QAAU,IAElBF,GACFA,EAAA,CAEJ,EAAG,GAAG,CACR,EAEAD,EAAoB+B,EAGpB,MAAMC,EAAW3D,EAA2B,qBAAsB8B,CAAG,EACjE6B,GACFA,EAAS,iBAAiB,QAAUlB,GAAkB,CACpDA,EAAE,gBAAA,EACFiB,EAAA,CACF,CAAC,EAIH5B,EAAI,iBAAiB,QAAUW,GAAkB,CAC3CA,EAAE,SAAWX,GACf4B,EAAA,CAEJ,CAAC,EAGD,MAAME,EAAa,OAAO,WAAW,oBAAoB,EAEnDC,EAAqBpB,GAAiC,CACrDA,EAAE,SACDX,EAAI,UAAU,SAAS,QAAQ,GACjC0B,EAAA,CAGN,EAEAI,EAAW,iBAAiB,SAAUC,CAAiB,EAGvD,IAAIC,EAAoD,KACpDC,EAAa,GAEjB,OAAO,iBAAiB,SAAU,IAAM,CACjCA,IACH,SAAS,KAAK,UAAU,IAAI,eAAe,EAC3CA,EAAa,IAGX,OAAO,WAAa,KAClBjC,EAAI,UAAU,SAAS,QAAQ,IACjCE,EAAO,UAAU,OAAO,QAAQ,EAChCF,EAAI,UAAU,OAAO,QAAQ,EACzBE,aAAkB,mBACpBA,EAAO,aAAa,gBAAiB,OAAO,EAE9C,SAAS,KAAK,MAAM,SAAW,IAI/B8B,GACF,aAAaA,CAAW,EAE1BA,EAAc,WAAW,IAAM,CAC7B,SAAS,KAAK,UAAU,OAAO,eAAe,EAC9CC,EAAa,EACf,EAAG,GAAG,CACR,CAAC,EAGG,OAAO,WAAa,KACtBP,EAAA,CAEJ,CCzVO,SAASQ,GAAuB,CAErC,GAAI,OAAO,OAAO,IAAQ,IAAa,CACrC,MAAMC,EAAyB,CAC7B,SAAU,IACV,OAAQ,iBACR,KAAM,GACN,OAAQ,IACR,MAAO,EACP,gBAAiB,aACjB,QAAS,QAAA,EAEX,OAAO,IAAI,KAAKA,CAAU,CAC5B,CAGA,MAAMC,EAAalE,EAA2B,eAAe,EACvDmE,EAAYnE,EAA2B,cAAc,EACrDoE,EAAgBpE,EAA2B,kBAAkB,EAkBnE,GAdIkE,IACFA,EAAW,MAAM,QAAU,IAC3BA,EAAW,MAAM,WAAa,WAE5BC,IACFA,EAAU,MAAM,QAAU,IAC1BA,EAAU,MAAM,WAAa,WAE3BC,IACFA,EAAc,MAAM,QAAU,IAC9BA,EAAc,MAAM,WAAa,WAI/B,OAAO,OAAO,MAAU,IAAa,CAEnCF,IACFA,EAAW,MAAM,UAAY,QAE3BC,IACFA,EAAU,MAAM,UAAY,QAE1BC,IACFA,EAAc,MAAM,UAAY,QAElC,MACF,CAGA,IAAIC,EAAsD,KAE1D,GAAI,OAAO,OAAO,MAAU,IAAa,CAmCvC,GAlCAA,EAAgB,WAAW,IAAM,CAC3BH,IACFA,EAAW,MAAM,QAAU,IAC3BA,EAAW,MAAM,WAAa,UAC9BA,EAAW,MAAM,UAAY,QAE3BC,IACFA,EAAU,MAAM,QAAU,IAC1BA,EAAU,MAAM,WAAa,UAC7BA,EAAU,MAAM,UAAY,QAE1BC,IACFA,EAAc,MAAM,QAAU,IAC9BA,EAAc,MAAM,WAAa,UACjCA,EAAc,MAAM,UAAY,QAElC,QAAQ,KAAK,oDAAoD,CACnE,EAAG,GAAI,EAGHF,IACFA,EAAW,MAAM,QAAU,IAC3BA,EAAW,MAAM,UAAY,qBAE3BC,IACFA,EAAU,MAAM,QAAU,IAC1BA,EAAU,MAAM,UAAY,qBAE1BC,IACFA,EAAc,MAAM,QAAU,IAC9BA,EAAc,MAAM,UAAY,oBAI9BF,GAAcG,EAAe,CAC/B,MAAMC,EAA0B,CAC9B,QAASJ,EACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,IAAK,CAAC,EACnB,SAAU,IACV,MAAO,IACP,OAAQ,eACR,SAAU,IAAM,CAEVG,IACF,aAAaA,CAAa,EAC1BA,EAAgB,MAEdH,IACFA,EAAW,MAAM,WAAa,UAElC,CAAA,EAEF,OAAO,MAAMI,CAAU,CACzB,CAGA,GAAIH,EAAW,CACb,MAAMI,EAAyB,CAC7B,QAASJ,EACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,IAAK,CAAC,EACnB,SAAU,IACV,MAAO,IACP,OAAQ,cAAA,EAEV,OAAO,MAAMI,CAAS,EAGLpE,EAA8B,oBAAqBgE,CAAS,EACpE,QAAQ,CAAC3B,EAAMgC,IAAU,CAChChC,EAAK,MAAM,QAAU,IACrB,MAAMiC,EAA0B,CAC9B,QAASjC,EACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,IAAK,CAAC,EACnB,SAAU,IACV,MAAO,IAAOgC,EAAQ,GACtB,OAAQ,cAAA,EAEV,OAAO,MAAMC,CAAU,CACzB,CAAC,CACH,CAGA,GAAIL,EAAe,CACjB,MAAMM,EAA6B,CACjC,QAASN,EACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,GAAI,CAAC,EAClB,SAAU,IACV,MAAO,IACP,OAAQ,eACR,SAAU,IAAM,CAEVA,IACFA,EAAc,MAAM,WAAa,UAErC,CAAA,EAEF,OAAO,MAAMM,CAAa,CAC5B,CAGA,MAAMC,EAA2B,CAC/B,QAAS,eACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,IAAK,CAAC,EACnB,SAAU,IACV,MAAO,IACP,OAAQ,cAAA,EAEV,OAAO,MAAMA,CAAW,EAExB,MAAMC,EAA8B,CAClC,QAAS,cACT,QAAS,CAAC,EAAG,CAAC,EACd,WAAY,CAAC,GAAI,CAAC,EAClB,SAAU,KACV,MAAO,IACP,OAAQ,cAAA,EAEV,OAAO,MAAMA,CAAc,EAE3B,MAAMC,EAA+B,CACnC,QAAS,eACT,QAAS,CAAC,EAAG,CAAC,EACd,MAAO,CAAC,GAAK,CAAC,EACd,SAAU,IACV,MAAO,KACP,OAAQ,uBAAA,EAEV,OAAO,MAAMA,CAAe,EAGP1E,EAA8B,eAAe,EACrD,QAAS2E,GAAS,CAC7B,MAAMC,EAAW/E,EAA2B,0BAA2B8E,CAAI,EACvEC,IACFD,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAME,EAA2B,CAC/B,QAASD,EACT,MAAO,KACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAMC,CAAW,CAC1B,CAAC,EAEDF,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAMG,EAA2B,CAC/B,QAASF,EACT,MAAO,EACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAME,CAAW,CAC1B,CAAC,EAEL,CAAC,EAGmB9E,EAA8B,eAAe,EACrD,QAAS+E,GAAQ,CAC3BA,EAAI,iBAAiB,aAAc,IAAM,CACvC,MAAMC,EAA2B,CAC/B,QAASD,EACT,MAAO,KACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAMC,CAAW,CAC1B,CAAC,EAEDD,EAAI,iBAAiB,aAAc,IAAM,CACvC,MAAMD,EAA2B,CAC/B,QAASC,EACT,MAAO,EACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAMD,CAAW,CAC1B,CAAC,CACH,CAAC,EAGyB9E,EAA8B,sBAAsB,EAC5D,QAAS2E,GAAS,CAClCA,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAMK,EAA2B,CAC/B,QAASL,EACT,MAAO,KACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAMK,CAAW,CAC1B,CAAC,EAEDL,EAAK,iBAAiB,aAAc,IAAM,CACxC,MAAMG,EAA2B,CAC/B,QAASH,EACT,MAAO,EACP,SAAU,IACV,OAAQ,aAAA,EAEV,OAAO,MAAMG,CAAW,CAC1B,CAAC,CACH,CAAC,CACH,CACF,CC5PO,MAAMG,CAAS,CAuBpB,YACEC,EACAC,EAA2B,GAC3B,CAjBF,KAAQ,gBAA2B,GAWnC,KAAQ,YAAsB,EAC9B,KAAQ,UAAoB,EAM1B,KAAK,SAAWD,EAGhB,KAAK,QAAU,CACb,SAAUC,EAAQ,UAAY,GAC9B,mBAAoBA,EAAQ,oBAAsB,IAClD,eAAgBA,EAAQ,gBAAkB,GAC1C,mBAAoBA,EAAQ,oBAAsB,qBAClD,mBAAoBA,EAAQ,oBAAsB,qBAClD,cAAeA,EAAQ,eAAiB,iBAAA,EAI1C,MAAMC,EAAQvF,EAA6B,KAAK,QAAQ,cAAe,KAAK,QAAQ,EACpF,GAAI,CAACuF,EACH,MAAM,IAAI,MAAM,0BAA0B,EAS5C,GAPA,KAAK,MAAQA,EAEb,KAAK,QAAUvF,EAA2B,KAAK,QAAQ,mBAAoB,KAAK,QAAQ,EACxF,KAAK,QAAUA,EAA2B,KAAK,QAAQ,mBAAoB,KAAK,QAAQ,EAGxF,KAAK,OAAS,MAAM,KAAK,KAAK,MAAM,iBAAmC,KAAK,CAAC,EACzE,KAAK,OAAO,SAAW,EACzB,MAAM,IAAI,MAAM,6BAA6B,EAS/C,GALA,KAAK,cAAgB,KAAK,OAAO,OACjC,KAAK,aAAe,EACpB,KAAK,WAAa,KAAK,SAAS,YAG5B,KAAK,eAAiB,EAAG,CACvB,KAAK,UACP,KAAK,QAAQ,MAAM,QAAU,QAE3B,KAAK,UACP,KAAK,QAAQ,MAAM,QAAU,QAG/B,MACF,CAGI,KAAK,QAAQ,UACf,KAAK,kBAAA,EAIP,KAAK,mBAAA,EAGL,KAAK,aAAe,KAAK,YAAY,KAAK,IAAI,EAC9C,KAAK,cAAgB,KAAK,aAAa,KAAK,IAAI,EAChD,KAAK,kBAAoB,KAAK,iBAAiB,KAAK,IAAI,EACxD,KAAK,iBAAmB,KAAK,gBAAgB,KAAK,IAAI,EACtD,KAAK,gBAAkB,KAAK,eAAe,KAAK,IAAI,EAGpD,KAAK,qBAAA,CACP,CAKQ,mBAA0B,CAChC,MAAMwF,EAAa,KAAK,OAAO,CAAC,EAAE,UAAU,EAAI,EAC1CC,EAAY,KAAK,OAAO,KAAK,OAAO,OAAS,CAAC,EAAE,UAAU,EAAI,EAEpE,KAAK,MAAM,aAAaA,EAAW,KAAK,OAAO,CAAC,CAAC,EACjD,KAAK,MAAM,YAAYD,CAAU,EAGjC,KAAK,OAAS,MAAM,KAAK,KAAK,MAAM,iBAAmC,KAAK,CAAC,CAC/E,CAKQ,oBAA2B,CACjC,KAAK,MAAM,QAAQ,MAAQ,KAAK,aAAa,SAAA,EAC7C,KAAK,MAAM,MAAM,WAAa,OAC9B,KAAK,MAAM,MAAM,UAAY,eAAe,KAAK,aAAe,KAAK,UAAU,MAE/E,WAAW,IAAM,CACf,KAAK,MAAM,MAAM,WAAa,aAAa,KAAK,QAAQ,kBAAkB,SAC5E,EAAG,EAAE,CACP,CAKQ,YAAY,EAAqB,CACvC,MAAME,EAAS,EAAE,OACXC,EAAUD,EAAO,QAAQ,KAAK,QAAQ,kBAAkB,EACxDE,EAAUF,EAAO,QAAQ,KAAK,QAAQ,kBAAkB,EAE1D,CAACC,GAAW,CAACC,GACbF,EAAO,QAAQ,yBAAyB,IAAM,KAAK,WACnD,KAAK,kBAELC,EACF,KAAK,aAAA,EACIC,GACT,KAAK,SAAA,GAET,CAKO,cAAqB,CACtB,KAAK,kBAET,KAAK,aAAe,KAAK,aAAe,EAEpC,KAAK,QAAQ,SACX,KAAK,aAAe,IACtB,KAAK,aAAe,GAGlB,KAAK,aAAe,IACtB,KAAK,aAAe,KAAK,cAAgB,GAI7C,KAAK,YAAY,KAAK,YAAY,EACpC,CAKO,UAAiB,CACtB,GAAI,MAAK,gBAIT,IAFA,KAAK,aAAe,KAAK,aAAe,EAEpC,KAAK,QAAQ,SAAU,CACzB,MAAMC,EAAW,KAAK,cAClB,KAAK,aAAeA,IACtB,KAAK,aAAeA,EAAW,EAEnC,MACM,KAAK,cAAgB,KAAK,gBAC5B,KAAK,aAAe,GAIxB,KAAK,YAAY,KAAK,YAAY,EACpC,CAKO,UAAUrB,EAAqB,CAChC,KAAK,kBAEL,KAAK,QAAQ,UACXA,EAAQ,IAAGA,EAAQ,GACnBA,EAAQ,KAAK,cAAgB,IAAGA,EAAQ,KAAK,cAAgB,KAE7DA,EAAQ,IAAGA,EAAQ,GACnBA,GAAS,KAAK,gBAAeA,EAAQ,KAAK,cAAgB,IAGhE,KAAK,aAAeA,EACpB,KAAK,YAAY,KAAK,YAAY,EACpC,CAKQ,YAAYA,EAAqB,CACvC,KAAK,gBAAkB,GACvB,KAAK,MAAM,QAAQ,MAAQA,EAAM,SAAA,EACjC,KAAK,MAAM,MAAM,WAAa,aAAa,KAAK,QAAQ,kBAAkB,UAC1E,KAAK,MAAM,MAAM,UAAY,eAAeA,EAAQ,KAAK,UAAU,MAE/D,KAAK,QAAQ,SACf,KAAK,MAAM,iBAAiB,gBAAiB,KAAK,oBAAoB,KAAK,IAAI,EAAG,CAAE,KAAM,EAAA,CAAM,EAEhG,WAAW,IAAM,CACf,KAAK,gBAAkB,EACzB,EAAG,KAAK,QAAQ,kBAAkB,CAEtC,CAKQ,oBAAoBsB,EAA8B,CACxD,GAAIA,EAAM,SAAW,KAAK,MAAO,OAEjC,MAAMC,EAAe3F,EAAiB,KAAK,MAAO,QAAS,CAAC,EAGxD2F,IAAiB,GACnB,KAAK,MAAM,MAAM,WAAa,OAC9B,KAAK,MAAM,QAAQ,MAAQ,KAAK,cAAc,SAAA,EAC9C,KAAK,MAAM,MAAM,UAAY,eAAe,KAAK,cAAgB,KAAK,UAAU,MAChF,KAAK,aAAe,KAAK,cACzB,WAAW,IAAM,CACf,KAAK,MAAM,MAAM,WAAa,aAAa,KAAK,QAAQ,kBAAkB,SAC5E,EAAG,EAAE,GAGEA,IAAiB,KAAK,cAAgB,IAC7C,KAAK,MAAM,MAAM,WAAa,OAC9B,KAAK,MAAM,QAAQ,MAAQ,IAC3B,KAAK,MAAM,MAAM,UAAY,eAAe,KAAK,UAAU,MAC3D,KAAK,aAAe,EACpB,WAAW,IAAM,CACf,KAAK,MAAM,MAAM,WAAa,aAAa,KAAK,QAAQ,kBAAkB,SAC5E,EAAG,EAAE,GAGP,KAAK,gBAAkB,EACzB,CAKQ,cAAqB,CAC3B,KAAK,WAAa,KAAK,SAAS,YAChC,MAAMvB,EAAQpE,EAAiB,KAAK,MAAO,QAAS,CAAC,EACrD,KAAK,MAAM,MAAM,UAAY,eAAeoE,EAAQ,KAAK,UAAU,KACrE,CAKQ,iBAAiB,EAAqB,CAC5C,KAAK,YAAc,EAAE,QAAQ,CAAC,EAAE,OAClC,CAKQ,gBAAgB,EAAqB,CAC3C,KAAK,UAAY,EAAE,QAAQ,CAAC,EAAE,OAChC,CAKQ,gBAAuB,CAC7B,GAAI,KAAK,gBAAiB,OAE1B,MAAMwB,EAAY,KAAK,QAAQ,eACzBC,EAAO,KAAK,YAAc,KAAK,UAEjC,KAAK,IAAIA,CAAI,EAAID,IACfC,EAAO,EAET,KAAK,SAAA,EAGL,KAAK,aAAA,GAIT,KAAK,YAAc,EACnB,KAAK,UAAY,CACnB,CAKQ,sBAA6B,CAEnC,SAAS,iBAAiB,QAAS,KAAK,YAAY,EAGpD,OAAO,iBAAiB,SAAU,KAAK,aAAa,EAGpD,KAAK,SAAS,iBAAiB,aAAc,KAAK,iBAAiB,EACnE,KAAK,SAAS,iBAAiB,YAAa,KAAK,gBAAgB,EACjE,KAAK,SAAS,iBAAiB,WAAY,KAAK,eAAe,CACjE,CAKO,SAAgB,CACrB,SAAS,oBAAoB,QAAS,KAAK,YAAY,EACvD,OAAO,oBAAoB,SAAU,KAAK,aAAa,EACvD,KAAK,SAAS,oBAAoB,aAAc,KAAK,iBAAiB,EACtE,KAAK,SAAS,oBAAoB,YAAa,KAAK,gBAAgB,EACpE,KAAK,SAAS,oBAAoB,WAAY,KAAK,eAAe,CACpE,CAKO,QAAe,CACpB,KAAK,OAAS,MAAM,KAAK,KAAK,MAAM,iBAAmC,KAAK,CAAC,EAC7E,KAAK,cAAgB,KAAK,OAAO,OACjC,KAAK,WAAa,KAAK,SAAS,YAE5B,KAAK,QAAQ,WAEG,KAAK,MAAM,iBAAiB,KAAK,EACrC,OAAS,KAAK,cAG5B,KAAK,kBAAA,GAGP,KAAK,mBAAA,CACP,CAKO,iBAA0B,CAC/B,OAAO,KAAK,YACd,CAKO,eAAwB,CAC7B,OAAO,KAAK,aACd,CACF,CChXA,MAAMC,EAAgC,CAAA,EAO/B,SAASC,EAAcb,EAAiC,CACpCnF,EAA8B,yBAAyB,EAE/D,QAAQkF,GAAmB,CAC1C,GAAI,CACF,MAAMN,EAAW,IAAIK,EAASC,EAAiBC,CAAO,EACtDY,EAAkB,KAAKnB,CAAQ,CACjC,OAASqB,EAAO,CAGd,QAAQ,KAAK,iCAAkCA,CAAK,CACtD,CACF,CAAC,CACH,CCnBO,SAASC,GAAgB,CAC9B,MAAMC,EAAWnG,EAA8B,YAAY,EAE3DmG,EAAS,QAAQC,GAAQ,CACvB,MAAMC,EAAWxG,EAA2B,iBAAkBuG,CAAI,EAC5DE,EAASzG,EAA2B,eAAgBuG,CAAI,EAE1D,CAACC,GAAY,CAACC,GAGdD,EAAS,QAAQ,QACrBA,EAAS,QAAQ,MAAQ,OAEzBA,EAAS,iBAAiB,QAAS,IAAM,CACvC,MAAM/C,EAAW8C,EAAK,UAAU,SAAS,QAAQ,EAcjD,GAXAD,EAAS,QAAQI,GAAK,CACpB,GAAIA,IAAMH,EAAM,CACd,MAAM,EAAIvG,EAA2B,eAAgB0G,CAAC,EACtDA,EAAE,UAAU,OAAO,QAAQ,EACvB,IACF,EAAE,MAAM,UAAY,IAExB,CACF,CAAC,EAGG,CAACjD,EACH8C,EAAK,UAAU,IAAI,QAAQ,EAC3BE,EAAO,MAAM,UAAY,IACzB,sBAAsB,IAAM,CAC1B,MAAME,EAASF,EAAO,aAAe,GACrCA,EAAO,MAAM,UAAY,GAAGE,CAAM,IACpC,CAAC,MACI,CACL,MAAMC,EAAgBH,EAAO,aAAe,GAC5CA,EAAO,MAAM,UAAY,GAAGG,CAAa,KACzC,sBAAsB,IAAM,CAC1BH,EAAO,MAAM,UAAY,IACzBF,EAAK,UAAU,OAAO,QAAQ,CAChC,CAAC,CACH,CACF,CAAC,EACH,CAAC,EAGD,OAAO,iBAAiB,SAAU,IAAM,CACtCD,EAAS,QAAQC,GAAQ,CACvB,GAAIA,EAAK,UAAU,SAAS,QAAQ,EAAG,CACrC,MAAME,EAASzG,EAA2B,eAAgBuG,CAAI,EAC9D,GAAIE,GAAUA,EAAO,MAAM,WAAaA,EAAO,MAAM,YAAc,MAAO,CACxE,MAAME,EAASF,EAAO,aAAe,GACrCA,EAAO,MAAM,UAAY,GAAGE,CAAM,IACpC,CACF,CACF,CAAC,CACH,CAAC,CACH,CC5DA,IAAIE,EAAyB,CAAA,EAK7B,SAASC,GAA2B,CAClC,MAAMC,EAAW/G,EAAmC,iBAAiB,EAChE+G,IAGLA,EAAS,MAAM,OAAS,OACxBA,EAAS,MAAM,OAAS,GAAGA,EAAS,YAAY,KAGhDA,EAAS,iBAAiB,QAAS,UAAW,CAC5C,KAAK,MAAM,OAAS,OACpB,MAAMC,EAAY,KAAK,IAAI,KAAK,aAAc,GAAG,EACjD,KAAK,MAAM,OAAS,GAAGA,CAAS,IAClC,CAAC,EAGD,OAAO,iBAAiB,OAAQ,IAAM,CACpCD,EAAS,MAAM,OAAS,OACxB,MAAMC,EAAY,KAAK,IAAID,EAAS,aAAc,GAAG,EACrDA,EAAS,MAAM,OAAS,GAAGC,CAAS,IACtC,CAAC,EACH,CAKA,SAASC,EAAcC,EAA4E,CACjG,MAAMC,EAAUD,EAAM,cAAA,EAEtB,OAAKC,EAGHD,EAAM,UAAU,OAAO,OAAO,EAF9BA,EAAM,UAAU,IAAI,OAAO,EAKtBC,CACT,CAKA,SAASC,EAAaC,EAAgC,CACpD,MAAMC,EAAiBD,EAAK,iBAC1B,uDAAA,EAGF,IAAIE,EAAc,GAElB,OAAAD,EAAe,QAAQJ,GAAS,CACdD,EAAcC,CAAK,IAEjCK,EAAc,GAElB,CAAC,EAEMA,CACT,CAKA,SAASC,GAA2B,CAClC,MAAMH,EAAOrH,EAA+B,qBAAqB,EACjE,GAAI,CAACqH,EAAM,OAEYA,EAAK,iBAC1B,uDAAA,EAGa,QAAQH,GAAS,CAC9B,MAAMO,EAAQJ,EAAK,cAAgC,cAAcH,EAAM,EAAE,IAAI,EAC7E,GAAIO,EAAO,CAET,MAAMC,EAAYD,EAAM,UAEpBC,EAAU,SAAS,GAAG,GAAK,CAACA,EAAU,SAAS,OAAO,IACxDD,EAAM,UAAYC,EAAU,QAAQ,YAAa,2DAA2D,GAE9GD,EAAM,UAAU,IAAI,UAAU,CAChC,CACF,CAAC,CACH,CAKA,SAASE,GAAwB,CAC/B,MAAMC,EAAY5H,EAAgC,SAAS,EACrD6H,EAAmB7H,EAA2B,gBAAgB,EAEhE,CAAC4H,GAAa,CAACC,GAGnBD,EAAU,iBAAiB,SAAWnF,GAAM,CAC1C,MAAMiD,EAASjD,EAAE,OACjB,GAAI,CAACiD,EAAO,MAAO,OAEnB,MAAMoC,EAAQ,MAAM,KAAKpC,EAAO,KAAK,EAG/BqC,EAAU,GAAK,KAAO,KACtBC,EAAe,CAAC,aAAc,YAAa,YAAa,aAAc,WAAW,EAEvFF,EAAM,QAASG,GAAS,CACtB,GAAI,CAACD,EAAa,SAASC,EAAK,IAAI,EAAG,CACrC,MAAM,QAAQA,EAAK,IAAI,kEAAkE,EACzF,MACF,CAEA,GAAIA,EAAK,KAAOF,EAAS,CACvB,MAAM,QAAQE,EAAK,IAAI,oCAAoC,EAC3D,MACF,CAGApB,EAAe,KAAKoB,CAAI,EAGxB,MAAMC,EAAS,IAAI,WACnBA,EAAO,OAAUzF,GAAM,CACrB,MAAM0F,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,mBACtBA,EAAU,QAAQ,SAAWF,EAAK,KAElC,MAAMG,EAAM,SAAS,cAAc,KAAK,EACxCA,EAAI,IAAM3F,EAAE,QAAQ,OACpB2F,EAAI,IAAMH,EAAK,KAEf,MAAMI,EAAY,SAAS,cAAc,QAAQ,EACjDA,EAAU,UAAY,qBACtBA,EAAU,KAAO,SACjBA,EAAU,aAAa,aAAc,cAAc,EACnDA,EAAU,iBAAiB,QAAS,IAAM,CAExCxB,EAAiBA,EAAe,OAAOyB,GAAKA,IAAML,CAAI,EAEtDE,EAAU,OAAA,EAEVI,EAAA,CACF,CAAC,EAEDJ,EAAU,YAAYC,CAAG,EACzBD,EAAU,YAAYE,CAAS,EAC/BR,EAAiB,YAAYM,CAAS,CACxC,EAEAD,EAAO,cAAcD,CAAI,CAC3B,CAAC,EAGDL,EAAU,MAAQ,EACpB,CAAC,CACH,CAKA,SAASW,GAAwB,CAC/B,MAAMX,EAAY5H,EAAgC,SAAS,EAC3D,GAAI,CAAC4H,EAAW,OAGhB,MAAMY,EAAe,IAAI,aACzB3B,EAAe,QAAQoB,GAAQ,CAC7BO,EAAa,MAAM,IAAIP,CAAI,CAC7B,CAAC,EAEDL,EAAU,MAAQY,EAAa,KACjC,CAKA,SAASC,GAA2B,CAClC,MAAMpB,EAAOrH,EAA+B,qBAAqB,EACjE,GAAI,CAACqH,EAAM,OAGXG,EAAA,EAGeH,EAAK,iBAClB,yBAAA,EAGK,QAAQH,GAAS,CACtBA,EAAM,iBAAiB,QAAS,IAAM,CAChCA,EAAM,aAAa,UAAU,GAC/BD,EAAcC,CAAK,CAEvB,CAAC,EAEDA,EAAM,iBAAiB,SAAU,IAAM,CACjCA,EAAM,aAAa,UAAU,GAC/BD,EAAcC,CAAK,CAEvB,CAAC,CACH,CAAC,EAGDG,EAAK,iBAAiB,SAAU,MAAO5E,GAAM,CAK3C,GAJAA,EAAE,eAAA,EAEc2E,EAAaC,CAAI,EAEpB,CAEX,MAAMqB,EAAYrB,EAAK,cAAiC,eAAe,EACjEsB,EAAeD,GAAW,aAAe,OAC3CA,IACFA,EAAU,SAAW,GACrBA,EAAU,YAAc,cAG1B,GAAI,CAEF,MAAME,EAAW,IAAI,SAASvB,CAAI,EAGlCR,EAAe,QAAQ,CAACoB,EAAMzD,IAAU,CACtCoE,EAAS,OAAO,SAASpE,CAAK,GAAIyD,CAAI,CACxC,CAAC,EACDW,EAAS,OAAO,aAAc/B,EAAe,OAAO,UAAU,EAG9D,MAAMgC,EAAWD,CAAQ,EAGzBE,EAAgB,mEAAoE,SAAS,EAG7FzB,EAAK,MAAA,EACLR,EAAiB,CAAA,EACjB,MAAMgB,EAAmB7H,EAA2B,gBAAgB,EAChE6H,IACFA,EAAiB,UAAY,GAGjC,OAASzB,EAAO,CACd,QAAQ,MAAM,yBAA0BA,CAAK,EAC7C0C,EAAgB,kEAAmE,OAAO,CAC5F,QAAA,CAEMJ,IACFA,EAAU,SAAW,GACrBA,EAAU,YAAcC,EAE5B,CACF,KAAO,CAEL,MAAMI,EAAa1B,EAAK,cAA2B,QAAQ,EACvD0B,IACFA,EAAW,eAAe,CAAE,SAAU,SAAU,MAAO,SAAU,EACjEA,EAAW,MAAA,EAEf,CACF,CAAC,CACH,CAKA,SAASC,EAAaf,EAA6B,CACjD,OAAO,IAAI,QAAQ,CAACgB,EAASC,IAAW,CACtC,MAAMhB,EAAS,IAAI,WACnBA,EAAO,OAAS,IAAM,CAGpB,MAAMiB,EAFSjB,EAAO,OAEA,MAAM,GAAG,EAAE,CAAC,EAClCe,EAAQE,CAAM,CAChB,EACAjB,EAAO,QAAUgB,EACjBhB,EAAO,cAAcD,CAAI,CAC3B,CAAC,CACH,CAKA,eAAeY,EAAWD,EAAmC,CAK3D,MAAMQ,EAAc,GADA,OAAe,aAAe,EACjB,qBAG3BC,EAAe,CACnB,UAAWT,EAAS,IAAI,WAAW,EACnC,SAAUA,EAAS,IAAI,UAAU,GAAe,GAChD,MAAOA,EAAS,IAAI,OAAO,EAC3B,MAAOA,EAAS,IAAI,OAAO,GAAe,GAC1C,YAAaA,EAAS,IAAI,aAAa,GAAe,GACtD,gBAAiBA,EAAS,IAAI,UAAU,GAAe,GACvD,gBAAiBA,EAAS,IAAI,QAAQ,GAAe,GACrD,kBAAmBA,EAAS,IAAI,UAAU,GAAe,GACzD,eAAgBA,EAAS,IAAI,SAAS,CAAA,EAMxC,GAAI/B,EAAe,OAAS,EAAG,CAC7BwC,EAAQ,OAAS,CAAA,EACjB,UAAWC,KAASzC,EAClB,GAAI,CACF,MAAMsC,EAAS,MAAMH,EAAaM,CAAK,EACvCD,EAAQ,OAAO,KAAK,CAClB,SAAUC,EAAM,KAChB,YAAaA,EAAM,KACnB,KAAMH,EACN,KAAMG,EAAM,IAAA,CACb,CACH,OAASlD,EAAO,CACd,QAAQ,MAAM,2BAA2BkD,EAAM,IAAI,cAAelD,CAAK,CACzE,CAEJ,CAGA,MAAMmD,EAAW,MAAM,MAAMH,EAAa,CACxC,OAAQ,OACR,QAAS,CACP,eAAgB,kBAAA,EAElB,KAAM,KAAK,UAAUC,CAAO,CAAA,CAC7B,EAED,GAAI,CAACE,EAAS,GAAI,CAChB,MAAMC,EAAY,MAAMD,EAAS,KAAA,EACjC,IAAIE,EAAe,yBAEnB,GAAI,CAEFA,EADkB,KAAK,MAAMD,CAAS,EACb,SAAWC,CACtC,MAAQ,CACNA,EAAeD,GAAaC,CAC9B,CAEA,MAAM,IAAI,MAAMA,CAAY,CAC9B,CAEA,MAAMC,EAAS,MAAMH,EAAS,KAAA,EAC9B,QAAQ,IAAI,+BAAgCG,CAAM,CACpD,CAKA,SAASZ,EAAgBa,EAAiBC,EAAiC,CACzE,MAAMvC,EAAOrH,EAA+B,qBAAqB,EACjE,GAAI,CAACqH,EAAM,OAGX,MAAMwC,EAAkBxC,EAAK,cAA2B,gBAAgB,EACpEwC,GACFA,EAAgB,OAAA,EAIlB,MAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAY,gCAAgCF,CAAI,GAC1DE,EAAU,YAAcH,EACxBG,EAAU,MAAM,QAAU;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAMtBF,IAAS,UACP,kEACA,iEAAiE;AAAA,IAGvEvC,EAAK,YAAYyC,CAAS,EAG1B,WAAW,IAAM,CACfA,EAAU,OAAA,CACZ,EAAG,GAAI,CACT,CAKO,SAASC,GAAiB,CAC/BjD,EAAA,EACAa,EAAA,EACAc,EAAA,CACF,CCnYO,SAASuB,GAA6B,CACzC,MAAMC,EAAOjK,EAA2B,OAAO,EACzCkK,EAAUlK,EAA2B,gBAAgB,EAE3D,GAAI,CAACiK,GAAQ,CAACC,EACV,OAIJ,MAAMC,EAAWF,EAAK,cAAc,qBAAqB,EAIzD,GAHkBA,EAAK,UAAU,SAAS,eAAe,GAGxC,CAACE,EACd,OAIJD,EAAQ,MAAM,WAAa;AAAA;AAAA,cAEjB,GAAK,KAAK,IAAI,KAAK,MAAQ,GAAI,EAAI,EAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAc/C,IAAIE,EAAQ,GACZ,MAAMC,EAAkB,IAAY,CAEhC,GAAI,CAACJ,GAAQ,CAACC,EACV,OAGJE,GAAS,GACT,MAAME,EAAU,IAAO,KAAK,IAAIF,EAAQ,GAAI,EAAI,IAC1CG,EAAU,IAAO,KAAK,IAAIH,EAAQ,IAAK,EAAI,GAC3CI,EAAU,IAAO,KAAK,IAAIJ,EAAQ,IAAK,EAAI,IAC3CK,EAAW,IAAO,KAAK,IAAIL,EAAQ,GAAI,EAAI,GAIjDF,EAAQ,MAAM,WAAa;AAAA;AAAA,kBAEjBE,CAAK;AAAA,kCACWE,CAAO;AAAA,kCACPA,EAAU,GAAI;AAAA,kCACdC,CAAO;AAAA,iCACRC,CAAO;AAAA,iCACPC,CAAQ;AAAA,iCACRD,CAAO;AAAA,kCACND,CAAO;AAAA,kCACPD,EAAU,GAAI;AAAA,kCACdA,CAAO;AAAA;AAAA,UAIjC,sBAAsBD,CAAe,CACzC,EAEAA,EAAA,CACJ,CAOO,SAASK,GAA+B,CAC3C,MAAMT,EAAOjK,EAA2B,OAAO,EAE/C,GAAI,CAACiK,GAAQA,EAAK,UAAU,SAAS,eAAe,EAAG,OAEvD,MAAMU,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,UAAY,kBACnBA,EAAO,MAAM,SAAW,WACxBA,EAAO,MAAM,IAAM,IACnBA,EAAO,MAAM,KAAO,IACpBA,EAAO,MAAM,MAAQ,OACrBA,EAAO,MAAM,OAAS,OACtBA,EAAO,MAAM,OAAS,IACtBA,EAAO,MAAM,cAAgB,OAE7B,MAAMC,EAAU5K,EAA2B,sBAAsB,EAKjE,GAJI,CAAC4K,GAGkBA,EAAQ,cAAc,kBAAkB,EAC3C,OAEpBA,EAAQ,YAAYD,CAAM,EAE1B,MAAME,EAAMF,EAAO,WAAW,IAAI,EAClC,GAAI,CAACE,EAAK,OAGV,MAAMC,EAAe,IAAY,CAC7BH,EAAO,MAAQ,OAAO,WACtBA,EAAO,OAAS,OAAO,WAC3B,EACAG,EAAA,EACA,OAAO,iBAAiB,SAAUA,CAAY,EAG9C,MAAMC,CAAS,CASX,aAAc,CACV,KAAK,EAAI,KAAK,OAAA,EAAWJ,EAAO,MAChC,KAAK,EAAI,KAAK,OAAA,EAAWA,EAAO,OAChC,KAAK,KAAO,KAAK,OAAA,EAAW,EAAI,EAChC,KAAK,QAAU,KAAK,OAAA,EAAW,IAAO,GACtC,KAAK,QAAU,KAAK,OAAA,EAAW,IAAO,GACtC,KAAK,QAAU,KAAK,OAAA,EAAW,GAAM,GACrC,KAAK,MAAQ,KAAK,OAAA,EAAW,GAAM,uBAAyB,0BAChE,CAEA,QAAe,CACX,KAAK,GAAK,KAAK,OACf,KAAK,GAAK,KAAK,QAGX,KAAK,EAAI,GAAK,KAAK,EAAIA,EAAO,cAAY,QAAU,KACpD,KAAK,EAAI,GAAK,KAAK,EAAIA,EAAO,eAAa,QAAU,IAGzD,KAAK,EAAI,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAO,MAAO,KAAK,CAAC,CAAC,EACnD,KAAK,EAAI,KAAK,IAAI,EAAG,KAAK,IAAIA,EAAO,OAAQ,KAAK,CAAC,CAAC,CACxD,CAEA,MAAa,CACT,GAAI,CAACE,EAAK,OACVA,EAAI,UAAA,EACJA,EAAI,IAAI,KAAK,EAAG,KAAK,EAAG,KAAK,KAAM,EAAG,KAAK,GAAK,CAAC,EACjD,MAAMG,EAAa,KAAK,MAAM,SAAS,WAAW,EAC5C,mBAAmB,KAAK,OAAO,IAC/B,uBAAuB,KAAK,OAAO,IACzCH,EAAI,UAAYG,EAChBH,EAAI,KAAA,CACR,CAAA,CAIJ,MAAMI,EAAwB,CAAA,EACxBC,EAAgB,KAAK,IAAI,GAAI,KAAK,MAAOP,EAAO,MAAQA,EAAO,OAAU,IAAK,CAAC,EAErF,QAASjE,EAAI,EAAGA,EAAIwE,EAAexE,IAC/BuE,EAAU,KAAK,IAAIF,CAAU,EAIjC,MAAMI,EAAU,IAAY,CACxBN,EAAI,UAAU,EAAG,EAAGF,EAAO,MAAOA,EAAO,MAAM,EAG/CM,EAAU,QAAQG,GAAY,CAC1BA,EAAS,OAAA,EACTA,EAAS,KAAA,CACb,CAAC,EAGD,QAAS1E,EAAI,EAAGA,EAAIuE,EAAU,OAAQvE,IAClC,QAAS2E,EAAI3E,EAAI,EAAG2E,EAAIJ,EAAU,OAAQI,IAAK,CAC3C,MAAMC,EAAKL,EAAUvE,CAAC,EAAE,EAAIuE,EAAUI,CAAC,EAAE,EACnCE,EAAKN,EAAUvE,CAAC,EAAE,EAAIuE,EAAUI,CAAC,EAAE,EACnCG,EAAW,KAAK,KAAKF,EAAKA,EAAKC,EAAKA,CAAE,EAExCC,EAAW,MACXX,EAAI,UAAA,EACJA,EAAI,YAAc,uBAAuB,IAAO,EAAIW,EAAW,IAAI,IACnEX,EAAI,UAAY,EAChBA,EAAI,OAAOI,EAAUvE,CAAC,EAAE,EAAGuE,EAAUvE,CAAC,EAAE,CAAC,EACzCmE,EAAI,OAAOI,EAAUI,CAAC,EAAE,EAAGJ,EAAUI,CAAC,EAAE,CAAC,EACzCR,EAAI,OAAA,EAEZ,CAGJ,sBAAsBM,CAAO,CACjC,EAEAA,EAAA,CACJ,CAMO,SAASM,GAA2B,CACvC,MAAMC,EAAQ1L,EAAgC,cAAc,EAG5D,GAAI,CAAC0L,EAAO,OAEZ,IAAI3K,EAAU,GAEd,MAAMH,EAAe,IAAY,CACxBG,IACD,OAAO,sBAAsB,IAAM,CAE/B,MAAM4K,EADW,OAAO,YACA,GAEpBD,IACAA,EAAM,MAAM,UAAY,cAAcC,CAAI,OAG9C5K,EAAU,EACd,CAAC,EACDA,EAAU,GAElB,EAEA,OAAO,iBAAiB,SAAUH,EAAc,CAAE,QAAS,GAAM,CACrE,CAKO,SAASgL,GAA8B,CAC1C5B,EAAA,EACAU,EAAA,EACAe,EAAA,CACJ,CC/LO,SAASI,EAAmBC,EAA8B,CAC/D,KAAM,CACJ,KAAAC,EACA,SAAAC,EACA,QAAAC,EACA,WAAAC,EACA,aAAAC,EACA,YAAAC,EACA,UAAAC,EACA,kBAAAC,EAAoB,EAAA,EAClBR,EAEES,EAAgB,CAAC,SAAUD,CAAiB,EAAE,OAAO,OAAO,EAAE,KAAK,GAAG,EAGtEE,EAAeR,EAClB,IACCS,GAAW;AAAA,sCACqBA,EAAQ,IAAI,KAAKA,EAAQ,OAAS,WAAWA,EAAQ,MAAM,IAAM,EAAE;AAAA,UAC/FA,EAAQ,IAAI;AAAA,WAAA,EAGjB,KAAK,EAAE,EAGJC,EAAcT,EACjB,IACCU,GAAU;AAAA,mBACGA,EAAO,IAAI,KAAKA,EAAO,OAAqB,WAAWA,EAAO,QAAU,QAAQ,GAAQ;AAAA,sBACrFA,EAAO,OAAO,UAAUA,EAAO,GAAG;AAAA,aAAA,EAGnD,KAAK,EAAE,EAGJC,EAAiBV,EACpB,IACC1J,GAAQ;AAAA,2BACaA,EAAK,IAAI,KAAKA,EAAK,OAAS,WAAWA,EAAK,MAAM,IAAM,EAAE,IAAIA,EAAK,IAAI,WAAA,EAE7F,KAAK,EAAE,EAGJqK,EAAmBV,EACtB,IAAIW,GAAQ,OAAOA,CAAI,OAAO,EAC9B,KAAK,EAAE,EAGJC,EAAkBX,EACrB,IACCY,GAAW;AAAA,2BACUA,EAAQ,IAAI,KAAKA,EAAQ,OAAS,WAAWA,EAAQ,MAAM,IAAM,EAAE,IAAIA,EAAQ,IAAI,WAAA,EAEzG,KAAK,EAAE,EAEV,MAAO;AAAA,qBACYT,CAAa;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMRR,EAAK,GAAG,UAAUA,EAAK,GAAG;AAAA;AAAA,cAEtCS,CAAY;AAAA;AAAA,gBAEVE,CAAW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASTE,CAAc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAShBC,CAAgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBASdE,CAAe;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBAQThB,EAAK,GAAG,UAAUA,EAAK,GAAG;AAAA;AAAA,eAEnCM,CAAS;AAAA;AAAA;AAAA;AAAA,IAIpB,KAAA,CACJ,CAKO,SAASY,EACdC,EACApB,EACoB,CACpB,MAAMqB,EAAOtB,EAAmBC,CAAM,EAEtC,IAAIlJ,EAAoC,KAQxC,GANI,OAAOsK,GAAc,SACvBtK,EAAgB,SAAS,cAA2BsK,CAAS,EAE7DtK,EAAgBsK,EAGd,CAACtK,EACH,eAAQ,MAAM,4BAA4B,EACnC,KAIT,GAAIA,IAAkB,SAAS,KAAM,CACnC,MAAMwK,EAAiBxK,EAAc,cAA2B,SAAS,EACzE,OAAIwK,GACFA,EAAe,UAAYD,EACpBvK,EAAc,cAA2B,SAAS,IAGzDA,EAAc,mBAAmB,YAAauK,CAAI,EAC3CvK,EAAc,cAA2B,SAAS,EAE7D,KAEE,QAAAA,EAAc,UAAYuK,EACnBvK,EAAc,cAA2B,SAAS,CAE7D,CAKO,SAASyK,GACdC,EACAxB,EACoB,CACpB,IAAIyB,EAA6B,KAQjC,GANI,OAAOD,GAAkB,SAC3BC,EAAS,SAAS,cAA2BD,CAAa,EAE1DC,EAASD,EAGP,CAACC,EACH,eAAQ,MAAM,0BAA0B,EACjC,KAaT,GATIzB,EAAO,MACUyB,EAAO,iBAAmC,6CAA6C,EAC/F,QAAQnF,GAAO,CACxBA,EAAI,IAAM0D,EAAO,KAAM,IACvB1D,EAAI,IAAM0D,EAAO,KAAM,GACzB,CAAC,EAICA,EAAO,SAAU,CACnB,MAAM0B,EAAoBD,EAAO,cAA2B,gBAAgB,EACxEC,IACoBA,EAAkB,iBAA8B,eAAe,EACvE,QAAQhL,GAAQA,EAAK,OAAA,CAAQ,EAE3CsJ,EAAO,SAAS,QAAQW,GAAW,CACjC,MAAMjK,EAAO,SAAS,cAAc,GAAG,EACvCA,EAAK,UAAY,eACjBA,EAAK,KAAOiK,EAAQ,KACpBjK,EAAK,YAAciK,EAAQ,KACvBA,EAAQ,SACVjK,EAAK,OAASiK,EAAQ,QAExB,MAAMV,EAAOyB,EAAkB,cAAc,eAAe,EACxDzB,GACFA,EAAK,sBAAsB,WAAYvJ,CAAI,CAE/C,CAAC,EAEL,CAGA,GAAIsJ,EAAO,QAAS,CAClB,MAAM2B,EAAmBF,EAAO,cAA2B,kBAAkB,EACzEE,IACFA,EAAiB,UAAY3B,EAAO,QACjC,IACCa,GAAU;AAAA,uBACGA,EAAO,IAAI,KAAKA,EAAO,OAAqB,WAAWA,EAAO,QAAU,QAAQ,GAAQ;AAAA,0BACrFA,EAAO,OAAO,UAAUA,EAAO,GAAG;AAAA,iBAAA,EAGnD,KAAK,EAAE,EAEd,CAGA,GAAIb,EAAO,WAAY,CACrB,MAAM4B,EAAsBH,EAAO,cAA2B,iBAAiB,EAC3EG,IACFA,EAAoB,UAAY5B,EAAO,WACpC,IACCtJ,GAAQ;AAAA,2BACSA,EAAK,IAAI,KAAKA,EAAK,OAAS,WAAWA,EAAK,MAAM,IAAM,EAAE,IAAIA,EAAK,IAAI,WAAA,EAEzF,KAAK,EAAE,EAEd,CAGA,GAAIsJ,EAAO,aAAc,CACvB,MAAM6B,EAAwBJ,EAAO,cAA2B,eAAe,EAC3EI,IACFA,EAAsB,UAAY7B,EAAO,aACtC,IAAIgB,GAAQ,OAAOA,CAAI,OAAO,EAC9B,KAAK,EAAE,EAEd,CAGA,GAAIhB,EAAO,YAAa,CAEtB,MAAM8B,EAAUL,EAAO,iBAA8B,cAAc,EACnE,IAAIM,EAA2C,KAG/C,UAAWC,KAAOF,EAAS,CACzB,MAAMG,EAAQD,EAAI,cAA2B,gBAAgB,EAC7D,GAAIC,GAASA,EAAM,cAAgB,eAAgB,CACjD,MAAMjM,EAAMgM,EAAI,cAA2B,iBAAiB,EAC5D,GAAIhM,EAAK,CACP+L,EAAuB/L,EACvB,KACF,CACF,CACF,CAGA,GAAK+L,EA0BHA,EAAqB,UAAY/B,EAAO,YACrC,IACCkB,GAAW;AAAA,2BACMA,EAAQ,IAAI,KAAKA,EAAQ,OAAS,WAAWA,EAAQ,MAAM,IAAM,EAAE,IAAIA,EAAQ,IAAI,WAAA,EAErG,KAAK,EAAE,MA/Be,CACzB,MAAMgB,EAAkB,MAAM,KAAKJ,CAAO,EAAE,KAAKE,GAAO,CACtD,MAAMC,EAAQD,EAAI,cAA2B,gBAAgB,EAC7D,OAAOC,GAASA,EAAM,cAAgB,eACxC,CAAC,EAED,GAAIC,GAAmBA,EAAgB,cAAe,CACpD,MAAMC,EAAS,SAAS,cAAc,KAAK,EAC3CA,EAAO,UAAY,cACnBA,EAAO,UAAY;AAAA;AAAA;AAAA;AAAA,gBAIXnC,EAAO,YACN,IACCkB,GAAW;AAAA,+BACEA,EAAQ,IAAI,KAAKA,EAAQ,OAAS,WAAWA,EAAQ,MAAM,IAAM,EAAE,IAAIA,EAAQ,IAAI,WAAA,EAEjG,KAAK,EAAE,CAAC;AAAA;AAAA;AAAA,UAIjBgB,EAAgB,sBAAsB,WAAYC,CAAM,CAC1D,CACF,CASF,CAGA,GAAInC,EAAO,UAAW,CACpB,MAAMoC,EAAcX,EAAO,cAA2B,mBAAmB,EACrEW,IACFA,EAAY,YAAcpC,EAAO,UAErC,CAEA,OAAOyB,CACT,CChWA,SAASY,IAAyB,CAGhC,OAFa,OAAO,SAAS,SACX,MAAM,GAAG,EAAE,OAAS,YAExC,CAKA,SAASC,IAAsB,CAC7B,MAAMC,EAAcF,GAAA,EACpB,OAAOE,IAAgB,cAAgBA,IAAgB,IAAMA,IAAgB,GAC/E,CAKA,SAASC,GAAoBpC,EAAwC,CACnE,MAAMqC,EAASH,GAAA,EAEf,OAAOlC,EAAW,IAAI1J,GAEhBA,EAAK,KAAK,WAAW,GAAG,GAAK,CAAC+L,EACzB,CACL,GAAG/L,EACH,KAAM,aAAaA,EAAK,IAAI,EAAA,EAGzBA,CACR,CACH,CAKA,MAAMgM,EAAoC,CACxC,KAAM,CACJ,IAAK,mBACL,IAAK,kBAAA,EAEP,SAAU,CACR,CACE,KAAM,mCACN,KAAM,mFACN,OAAQ,QAAA,EAEV,CACE,KAAM,qBACN,KAAM,0DACN,OAAQ,QAAA,EAEV,CACE,KAAM,oBACN,KAAM,kBAAA,EAER,CACE,KAAM,2BACN,KAAM,iCAAA,CACR,EAEF,QAAS,CACP,CACE,KAAM,4CACN,QAAS,gCACT,IAAK,YACL,OAAQ,QAAA,EAEV,CACE,KAAM,6DACN,QAAS,8BACT,IAAK,WACL,OAAQ,QAAA,EAEV,CACE,KAAM,wGACN,QAAS,gCACT,IAAK,YACL,OAAQ,QAAA,CACV,EAEF,WAAY,CACV,CAAE,KAAM,OAAQ,KAAM,OAAA,EACtB,CAAE,KAAM,WAAY,KAAM,WAAA,EAC1B,CAAE,KAAM,WAAY,KAAM,WAAA,EAC1B,CAAE,KAAM,QAAS,KAAM,QAAA,EACvB,CAAE,KAAM,iBAAkB,KAAM,eAAA,EAChC,CAAE,KAAM,MAAO,KAAM,MAAA,CAAO,EAE9B,aAAc,CACZ,yBACA,yBAAA,EAEF,YAAa,CACX,CAAE,KAAM,4BAA6B,KAAM,gCAAA,EAC3C,CAAE,KAAM,qBAAsB,KAAM,yBAAA,EACpC,CAAE,KAAM,sBAAuB,KAAM,0BAAA,EACrC,CAAE,KAAM,4BAA6B,KAAM,gCAAA,CAAiC,EAE9E,UAAW,oBACb,EAKO,SAASC,IAAmB,CACjC,MAAMrB,EAAiB,SAAS,cAA2B,SAAS,EAG9DsB,EAAiC,CACrC,GAAGF,EACH,WAAYF,GAAoBE,EAAoB,UAAU,CAAA,EAGhE,GAAIpB,EAEFC,GAAaD,EAAgBsB,CAAgB,MACxC,CAEL,MAAMC,EAAO,SAAS,cAA2B,MAAM,EACnDA,GACF1B,EAAa0B,EAAMD,CAAgB,CAEvC,CACF,CCrHO,MAAME,EAAS,CAwBpB,YAAYtJ,EAA2B,GAAI,CAvB3C,KAAQ,QAA8B,KACtC,KAAQ,QAA8B,KACtC,KAAQ,MAAiC,KACzC,KAAQ,SAA+B,KACvC,KAAQ,QAA8B,KACtC,KAAQ,QAA8B,KACtC,KAAQ,QAA8B,KAEtC,KAAQ,OAAmB,CAAA,EAC3B,KAAQ,aAAuB,EAC/B,KAAQ,OAAkB,GAK1B,KAAQ,YAAsB,EAC9B,KAAQ,UAAoB,EAQ1B,KAAK,QAAU,CACb,kBAAmBA,EAAQ,mBAAqB,IAChD,YAAaA,EAAQ,aAAe,GACpC,eAAgBA,EAAQ,gBAAkB,GAC1C,gBAAiBA,EAAQ,iBAAmB,EAAA,EAG9C,KAAK,eAAiB,KAAK,cAAc,KAAK,IAAI,EAClD,KAAK,kBAAoB,KAAK,iBAAiB,KAAK,IAAI,EACxD,KAAK,gBAAkB,KAAK,eAAe,KAAK,IAAI,EAEpD,KAAK,eAAA,CACP,CAKQ,gBAAuB,CAE7B,KAAK,QAAU,SAAS,cAAc,KAAK,EAC3C,KAAK,QAAQ,UAAY,mBACzB,KAAK,QAAQ,UAAY;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAyBzB,SAAS,KAAK,YAAY,KAAK,OAAO,EAGtC,KAAK,QAAU,KAAK,QAAQ,cAAc,mBAAmB,EAC7D,KAAK,MAAQ,KAAK,QAAQ,cAAc,iBAAiB,EACzD,KAAK,SAAW,KAAK,QAAQ,cAAc,iBAAiB,EAC5D,KAAK,QAAU,KAAK,QAAQ,cAAc,gBAAgB,EAC1D,KAAK,QAAU,KAAK,QAAQ,cAAc,gBAAgB,EAC1D,KAAK,QAAU,KAAK,QAAQ,cAAc,mBAAmB,EAG7D,KAAK,UAAU,iBAAiB,QAAS,IAAM,KAAK,OAAO,EAC3D,KAAK,SAAS,iBAAiB,QAAS,IAAM,KAAK,cAAc,EACjE,KAAK,SAAS,iBAAiB,QAAS,IAAM,KAAK,UAAU,EAEzD,KAAK,QAAQ,iBACf,KAAK,QAAQ,iBAAiB,QAAU,GAAM,CACxC,EAAE,SAAW,KAAK,SACpB,KAAK,MAAA,CAET,CAAC,CAEL,CAKO,KAAKuJ,EAAkBC,EAAqB,EAAS,CACtD,KAAK,QAAU,CAAC,KAAK,UAEzB,KAAK,OAASD,EACd,KAAK,aAAeC,EACpB,KAAK,OAAS,GAGd,KAAK,QAAQ,UAAU,IAAI,QAAQ,EACnC,SAAS,KAAK,MAAM,SAAW,SAG/B,KAAK,UAAU,KAAK,YAAY,EAGhC,KAAK,iBAAA,EAGD,KAAK,QAAQ,gBACf,SAAS,iBAAiB,UAAW,KAAK,cAAc,EAGtD,KAAK,QAAQ,aAAe,KAAK,UACnC,KAAK,QAAQ,iBAAiB,aAAc,KAAK,iBAAiB,EAClE,KAAK,QAAQ,iBAAiB,WAAY,KAAK,eAAe,GAElE,CAKO,OAAc,CACf,CAAC,KAAK,QAAU,CAAC,KAAK,UAE1B,KAAK,OAAS,GACd,KAAK,QAAQ,UAAU,OAAO,QAAQ,EACtC,SAAS,KAAK,MAAM,SAAW,GAG/B,SAAS,oBAAoB,UAAW,KAAK,cAAc,EAEvD,KAAK,UACP,KAAK,QAAQ,oBAAoB,aAAc,KAAK,iBAAiB,EACrE,KAAK,QAAQ,oBAAoB,WAAY,KAAK,eAAe,GAErE,CAKQ,UAAUtK,EAAqB,CACrC,GAAI,CAAC,KAAK,OAAS,CAAC,KAAK,QAAS,OAGlC,KAAK,MAAM,UAAU,IAAI,SAAS,EAElC,MAAM4D,EAAM,IAAI,MAChBA,EAAI,OAAS,IAAM,CACb,KAAK,QACP,KAAK,MAAM,IAAM,KAAK,OAAO5D,CAAK,EAClC,KAAK,MAAM,UAAU,OAAO,SAAS,EAEzC,EACA4D,EAAI,IAAM,KAAK,OAAO5D,CAAK,EAG3B,KAAK,QAAQ,YAAc,GAAGA,EAAQ,CAAC,MAAM,KAAK,OAAO,MAAM,EACjE,CAKO,cAAqB,CACtB,KAAK,OAAO,QAAU,IAE1B,KAAK,aAAe,KAAK,aAAe,EACpC,KAAK,aAAe,EACpB,KAAK,OAAO,OAAS,EAEzB,KAAK,UAAU,KAAK,YAAY,EAClC,CAKO,UAAiB,CAClB,KAAK,OAAO,QAAU,IAE1B,KAAK,aAAe,KAAK,aAAe,KAAK,OAAO,OAAS,EACzD,KAAK,aAAe,EACpB,EAEJ,KAAK,UAAU,KAAK,YAAY,EAClC,CAKQ,kBAAyB,CAC/B,MAAMuK,EAAgB,KAAK,OAAO,OAAS,EAEvC,KAAK,UACP,KAAK,QAAQ,MAAM,QAAUA,EAAgB,OAAS,QAEpD,KAAK,UACP,KAAK,QAAQ,MAAM,QAAUA,EAAgB,OAAS,QAEpD,KAAK,UACP,KAAK,QAAQ,MAAM,QAAUA,EAAgB,QAAU,OAE3D,CAKQ,cAAc,EAAwB,CAC5C,OAAQ,EAAE,IAAA,CACR,IAAK,SACH,KAAK,MAAA,EACL,MACF,IAAK,YACH,KAAK,aAAA,EACL,MACF,IAAK,aACH,KAAK,SAAA,EACL,KAAA,CAEN,CAKQ,iBAAiB,EAAqB,CAC5C,KAAK,YAAc,EAAE,QAAQ,CAAC,EAAE,OAClC,CAKQ,eAAe,EAAqB,CAC1C,KAAK,UAAY,EAAE,eAAe,CAAC,EAAE,QACrC,MAAM9I,EAAO,KAAK,YAAc,KAAK,UAGjC,KAAK,IAAIA,CAAI,EAFC,KAGZA,EAAO,EACT,KAAK,SAAA,EAEL,KAAK,aAAA,EAGX,CAKO,SAAgB,CACrB,KAAK,MAAA,EACL,KAAK,SAAS,OAAA,CAChB,CACF,CAGA,IAAI+I,EAAoC,KAKjC,SAASC,IAAwB,CACtC,OAAKD,IACHA,EAAmB,IAAIJ,IAElBI,CACT,CAMO,SAASE,IAA6B,CAC3C,MAAMC,EAAWF,GAAA,EAGjB,SAAS,iBAAiB,QAAU,GAAM,CACxC,MAAMvJ,EAAS,EAAE,OAGjB,GAAIA,EAAO,UAAY,OAASA,EAAO,QAAQ,iBAAiB,EAAG,CACjE,EAAE,eAAA,EACF,EAAE,gBAAA,EAEF,MAAMX,EAAWW,EAAO,QAAQ,yBAAyB,EACzD,GAAI,CAACX,EAAU,OAGf,MAAMQ,EAAQR,EAAS,cAAc,iBAAiB,EACtD,GAAI,CAACQ,EAAO,OAEZ,MAAM6J,EAAY,MAAM,KAAK7J,EAAM,iBAAiB,KAAK,CAAC,EAIpD8J,MAAe,IACfC,EAAyB,CAAA,EAE/BF,EAAU,QAAQhH,GAAO,CACvB,MAAMmH,EAAOnH,EAAyB,IACjCiH,EAAS,IAAIE,CAAG,IACnBF,EAAS,IAAIE,CAAG,EAChBD,EAAa,KAAKC,CAAG,EAEzB,CAAC,EAGD,MAAMC,EAAc9J,EAA4B,IAChD,IAAIoJ,EAAaQ,EAAa,QAAQE,CAAU,EAC5CV,IAAe,KAAIA,EAAa,GAGpCK,EAAS,KAAKG,EAAcR,CAAU,CACxC,CACF,CAAC,CACH,CC9TA,MAAMW,GAAgC,CACpC,CACE,OAAQ,oBACR,MAAO,UACP,KAAM,kBAAA,CAEV,EAKA,SAASC,GAAoB1D,EAAkC,CAU7D,MAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QATeA,EAAS,IAAIS,GAAW;AAAA,eACjCA,EAAQ,IAAI;AAAA;AAAA;AAAA;AAAA,QAInBA,EAAQ,MAAM;AAAA;AAAA,GAEnB,EAAE,KAAK,EAAE,CASS;AAAA;AAAA,GAGrB,CAKO,SAASkD,IAA0B,CAErB,SAAS,iBAAoC,gBAAgB,EAErE,QAAQC,GAAa,CAE9B,GAAIA,EAAU,eAAe,UAAU,SAAS,uBAAuB,EACrE,OAIF,MAAMhF,EAAU,SAAS,cAAc,KAAK,EAC5CA,EAAQ,UAAY,wBAGpBgF,EAAU,YAAY,aAAahF,EAASgF,CAAS,EAGrDhF,EAAQ,YAAYgF,CAAS,EAG7BhF,EAAQ,mBAAmB,YAAa8E,GAAoBD,EAAa,CAAC,EAG1E,MAAMvK,EAAM0F,EAAQ,cAAiC,oBAAoB,EAGzE1F,GAAK,iBAAiB,QAAUzC,GAAM,CACpCA,EAAE,eAAA,EACFA,EAAE,gBAAA,EAEF,MAAMgB,EAAWmH,EAAQ,UAAU,SAAS,QAAQ,EAGpD,SAAS,iBAAiB,+BAA+B,EAAE,QAAQiF,GAAK,CACtEA,EAAE,UAAU,OAAO,QAAQ,EAC3BA,EAAE,cAAc,oBAAoB,GAAG,aAAa,gBAAiB,OAAO,CAC9E,CAAC,EAGIpM,IACHmH,EAAQ,UAAU,IAAI,QAAQ,EAC9B1F,EAAI,aAAa,gBAAiB,MAAM,EAE5C,CAAC,EAGD,SAAS,iBAAiB,QAAUzC,GAAM,CACnCmI,EAAQ,SAASnI,EAAE,MAAc,IACpCmI,EAAQ,UAAU,OAAO,QAAQ,EACjC1F,GAAK,aAAa,gBAAiB,OAAO,EAE9C,CAAC,EAGD,SAAS,iBAAiB,UAAYzC,GAAM,CACtCA,EAAE,MAAQ,UAAYmI,EAAQ,UAAU,SAAS,QAAQ,IAC3DA,EAAQ,UAAU,OAAO,QAAQ,EACjC1F,GAAK,aAAa,gBAAiB,OAAO,EAE9C,CAAC,CACH,CAAC,CACH,CCzFA,QAAQ,IAAI,4BAA4B,EAGxC,SAAS4K,IAAiB,CACxB,MAAMC,EAAS,SAAS,eAAe,YAAY,EAC/CA,IACFA,EAAO,UAAU,IAAI,QAAQ,EAE7B,WAAW,IAAM,CACfA,EAAO,OAAA,CACT,EAAG,GAAG,EAEV,CAGA,SAAS,iBAAiB,mBAAoB,IAAM,CAGlD,MAAMpP,EAAS,SAAS,cAA2B,SAAS,EACxDA,IACFA,EAAO,MAAM,QAAU,IACvBA,EAAO,MAAM,WAAa,UAC1BA,EAAO,MAAM,QAAU,SAIzB,MAAMqP,EAAiB,SAAS,iBAA8B,gEAAgE,EAC9HA,EAAe,QAAQC,GAAM,CAC3BA,EAAG,MAAM,QAAU,IACnBA,EAAG,MAAM,WAAa,SACxB,CAAC,EAGD,WAAW,IAAM,CACXtP,IACFA,EAAO,MAAM,QAAU,IACvBA,EAAO,MAAM,WAAa,WAE5BqP,EAAe,QAAQC,GAAM,CAC3BA,EAAG,MAAM,QAAU,IACnBA,EAAG,MAAM,WAAa,SACxB,CAAC,CACH,EAAG,GAAG,EAGN,SAASC,EAASC,EAAcC,EAAsB,CACpD,GAAI,CACFA,EAAA,CACF,OAAShK,EAAO,CACd,QAAQ,MAAM,sBAAsB+J,CAAI,IAAK/J,CAAK,CACpD,CACF,CAGA8J,EAAS,eAAgBxP,CAAgB,EAGzCwP,EAAS,oBAAqBrP,CAAqB,EAGnDqP,EAAS,iBAAkBrO,CAAkB,EAG7CqO,EAAS,aAAc3M,CAAc,EAGrC,WAAW,IAAM,CACf2M,EAAS,eAAgB5N,CAAgB,CAC3C,EAAG,CAAC,EAGJ4N,EAAS,gBAAiBpN,CAAiB,GAGpB,IAAM,CAE3B,IAAIuN,EAAW,EACf,MAAMC,EAAc,GAEdC,EAAe,IAAM,CACzBF,IACA,MAAMG,EAAY,OAAO,OAAO,IAAQ,IAClCC,EAAc,OAAO,OAAO,MAAU,IAExCD,GAAaC,EAEfP,EAAS,aAAclM,CAAc,EAC5BqM,EAAWC,EAEpB,WAAWC,EAAc,GAAG,GAG5B,QAAQ,KAAK,sEAAsE,EACnFL,EAAS,aAAclM,CAAc,EAEzC,EAEAuM,EAAA,CACF,GAEA,EAGAL,EAAS,YAAa/J,CAAa,EAGnC+J,EAAS,mBAAoBhB,EAAoB,EAGjDgB,EAAS,gBAAiBP,EAAiB,EAM3CO,EAAS,MAAO7J,CAAO,EAGvB6J,EAAS,OAAQnG,CAAQ,EAGzBmG,EAAS,oBAAqBtE,CAAqB,EAMnDsE,EAAS,SAAUzB,EAAU,EAG7B,WAAW,IAAM,CACfqB,GAAA,CACF,EAAG,GAAG,CACR,CAAC"}